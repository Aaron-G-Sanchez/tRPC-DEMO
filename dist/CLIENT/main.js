/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e={71:(e,r,t)=>{var n=t(3565),o=t(4889),s=t(7202);function a(e,r,t){if(null!=r){if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object expected.");var n,o;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(o=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else t&&e.stack.push({async:!0});return r}function i(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=new Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(i=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,o=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===o)return o=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(s).then(r,(function(e){return t(e),r()}))}else o|=1}catch(e){t(e)}if(1===o)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}const c=Symbol("ping");r.PING_SYM=c,r.withPing=async function*(e,r){const t={stack:[],error:void 0,hasError:!1};try{const u=a(t,o.iteratorResource(e),!0);let l,p=u.next();for(;;){const e={stack:[],error:void 0,hasError:!1};try{const t=a(e,s.timerResource(r),!1);if(l=await n.Unpromise.race([p,t.start()]),l===s.disposablePromiseTimerResult){yield c;continue}if(l.done)return l.value;p=u.next(),yield l.value,l=null}catch(r){e.error=r,e.hasError=!0}finally{i(e)}}}catch(e){t.error=e,t.hasError=!0}finally{const e=i(t);e&&await e}}},105:(e,r)=>{r.inputWithTrackedEventId=function(e,r){return r?null!=e&&"object"!=typeof e?e:{...e??{},lastEventId:r}:e}},215:(e,r)=>{r.defaultFormatter=({shape:e})=>e},425:(e,r,t)=>{var n=t(633);r.createChain=function(e){return n.observable((r=>function r(t=0,n=e.op){const o=e.links[t];if(!o)throw new Error("No more links to execute - did you forget to add an ending link?");return o({op:n,next:e=>r(t+1,e)})}().subscribe(r)))}},493:(e,r)=>{const t=Symbol();function n(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}const o="function"==typeof Symbol&&!!Symbol.asyncIterator;r.abortSignalsAnyPonyfill=function(e){if("function"==typeof AbortSignal.any)return AbortSignal.any(e);const r=new AbortController;for(const r of e){if(r.aborted){t();break}r.addEventListener("abort",t,{once:!0})}return r.signal;function t(){r.abort();for(const r of e)r.removeEventListener("abort",t)}},r.assert=function(e,r="no additional info"){if(!e)throw new Error(`AssertionError: ${r}`)},r.identity=function(e){return e},r.isAsyncIterable=function(e){return o&&n(e)&&Symbol.asyncIterator in e},r.isFunction=function(e){return"function"==typeof e},r.isObject=n,r.mergeWithoutOverrides=function(e,...r){const t=Object.assign(Object.create(null),e);for(const e of r)for(const r in e){if(r in t&&t[r]!==e[r])throw new Error(`Duplicate key ${r}`);t[r]=e[r]}return t},r.noop=function(){},r.omitPrototype=function(e){return Object.assign(Object.create(null),e)},r.run=e=>e(),r.sleep=function(e=0){return new Promise((r=>setTimeout(r,e)))},r.unsetMarker=t},525:(e,r,t)=>{var n=t(633),o=t(5563),s=t(5507),a=t(4539),i=t(6333),c=t(3697);function u(e){const r=c.resolveHTTPLinkOptions(e),t=e.maxURLLength??1/0,u=e.maxItems??1/0;return()=>{const l=n=>({validate(e){if(t===1/0&&u===1/0)return!0;if(e.length>u)return!1;const o=e.map((e=>e.path)).join(","),s=e.map((e=>e.input));return c.getUrl({...r,type:n,path:o,inputs:s,signal:null}).length<=t},async fetch(t){const s=t.map((e=>e.path)).join(","),u=t.map((e=>e.input)),l=a.allAbortSignals(...t.map((e=>e.signal))),p=new AbortController,d=c.fetchHTTPResponse({...r,signal:a.raceAbortSignals(l,p.signal),type:n,contentTypeHeader:"application/json",trpcAcceptHeader:"application/jsonl",getUrl:c.getUrl,getBody:c.getBody,inputs:u,path:s,headers:()=>e.headers?"function"==typeof e.headers?e.headers({opList:t}):e.headers:{}}),f=await d,[h]=await o.jsonlStreamConsumer({from:f.body,deserialize:r.transformer.output.deserialize,formatError(e){const r=e.error;return i.TRPCClientError.from({error:r})},abortController:p});return Object.keys(t).map((async e=>{let r=await Promise.resolve(h[e]);if("result"in r){const e=await Promise.resolve(r.result);r={result:{data:await Promise.resolve(e.data)}}}return{json:r,meta:{response:f}}}))}}),p={query:s.dataLoader(l("query")),mutation:s.dataLoader(l("mutation"))};return({op:e})=>n.observable((r=>{if("subscription"===e.type)throw new Error("Subscriptions are unsupported by `httpBatchStreamLink` - use `httpSubscriptionLink` or `wsLink`");let t;return p[e.type].load(e).then((e=>{if(t=e,!("error"in e.json))return"result"in e.json?(r.next({context:e.meta,result:e.json.result}),void r.complete()):void r.complete();r.error(i.TRPCClientError.from(e.json,{meta:e.meta}))})).catch((e=>{r.error(i.TRPCClientError.from(e,{meta:t?.meta}))})),()=>{}}))}}const l=u;r.httpBatchStreamLink=u,r.unstable_httpBatchStreamLink=l},583:(e,r,t)=>{var n=t(872),o=t(7711),s=t(1791),a=t(6333),i=t(7760),c=t(1965),u=t(525),l=t(1673),p=t(8165),d=t(3361),f=t(5496),h=t(1020),m=t(4819),y=t(7138),b=t(1081),E=t(4207);r.createTRPCUntypedClient=n.createTRPCUntypedClient,r.clientCallTypeToProcedureType=o.clientCallTypeToProcedureType,r.createTRPCClient=o.createTRPCClient,r.createTRPCClientProxy=o.createTRPCClientProxy,r.createTRPCProxyClient=o.createTRPCClient,r.getUntypedClient=o.getUntypedClient,r.getFetch=s.getFetch,r.TRPCClientError=a.TRPCClientError,r.isTRPCClientError=a.isTRPCClientError,r.isFormData=i.isFormData,r.isNonJsonSerializable=i.isNonJsonSerializable,r.isOctetType=i.isOctetType,r.httpBatchLink=c.httpBatchLink,r.httpBatchStreamLink=u.httpBatchStreamLink,r.unstable_httpBatchStreamLink=u.unstable_httpBatchStreamLink,r.httpLink=l.httpLink,r.loggerLink=p.loggerLink,r.splitLink=d.splitLink,r.wsLink=f.wsLink,r.httpSubscriptionLink=h.httpSubscriptionLink,r.unstable_httpSubscriptionLink=h.unstable_httpSubscriptionLink,r.retryLink=m.retryLink,r.experimental_localLink=y.experimental_localLink,r.TRPCUntypedClient=b.TRPCUntypedClient,r.createWSClient=E.createWSClient},633:(e,r,t)=>{var n=t(4224),o=t(8776),s=t(7859);r.isObservable=n.isObservable,r.observable=n.observable,r.observableToAsyncIterable=n.observableToAsyncIterable,r.observableToPromise=n.observableToPromise,r.distinctUntilChanged=o.distinctUntilChanged,r.distinctUntilDeepChanged=o.distinctUntilDeepChanged,r.map=o.map,r.share=o.share,r.tap=o.tap,r.behaviorSubject=s.behaviorSubject},872:(e,r,t)=>{var n=t(1081);r.TRPCUntypedClient=n.TRPCUntypedClient,r.createTRPCUntypedClient=function(e){return new n.TRPCUntypedClient(e)}},968:(e,r,t)=>{var n=t(9582),o=t(5069);t(3565),t(2589),t(6712),r.TRPC_ERROR_CODES_BY_KEY=n.TRPC_ERROR_CODES_BY_KEY,r.TRPC_ERROR_CODES_BY_NUMBER=n.TRPC_ERROR_CODES_BY_NUMBER,r.parseTRPCMessage=o.parseTRPCMessage},1020:(e,r,t)=>{var n=t(633),o=t(5563),s=t(105),a=t(4539),i=t(6333),c=t(3213),u=t(3697),l=t(9547);async function p(e){let r=await l.resultOf(e.url);if(e.connectionParams){const t=await l.resultOf(e.connectionParams),n=r.includes("?")?"&":"?";r+=n+"connectionParams="+encodeURIComponent(JSON.stringify(t))}return r}function d(e){const r=c.getTransformer(e.transformer);return()=>({op:t})=>n.observable((c=>{const{type:d,path:f,input:h}=t;if("subscription"!==d)throw new Error("httpSubscriptionLink only supports subscriptions");let m;const y=new AbortController,b=a.raceAbortSignals(t.signal,y.signal),E=o.sseStreamConsumer({url:async()=>u.getUrl({transformer:r,url:await p(e),input:s.inputWithTrackedEventId(h,m),path:f,type:d,signal:null}),init:()=>l.resultOf(e.eventSourceOptions,{op:t}),signal:b,deserialize:r.output.deserialize,EventSource:e.EventSource??globalThis.EventSource}),g=n.behaviorSubject({type:"state",state:"connecting",error:null}),w=g.subscribe({next(e){c.next({result:e})}});return o.run((async()=>{for await(const e of E)switch(e.type){case"ping":break;case"data":const r=e.data;let t;r.id?(m=r.id,t={id:r.id,data:r}):t={data:r.data},c.next({result:t,context:{eventSource:e.eventSource}});break;case"connected":c.next({result:{type:"started"},context:{eventSource:e.eventSource}}),g.next({type:"state",state:"pending",error:null});break;case"serialized-error":{const r=i.TRPCClientError.from({error:e.error});if(o.retryableRpcCodes.includes(e.error.code)){g.next({type:"state",state:"connecting",error:r});break}throw r}case"connecting":{const r=g.get(),t=e.event&&i.TRPCClientError.from(e.event);if(!t&&"connecting"===r.state)break;g.next({type:"state",state:"connecting",error:t});break}case"timeout":g.next({type:"state",state:"connecting",error:new i.TRPCClientError(`Timeout of ${e.ms}ms reached while waiting for a response`)})}c.next({result:{type:"stopped"}}),g.next({type:"state",state:"idle",error:null}),c.complete()})).catch((e=>{c.error(i.TRPCClientError.from(e))})),()=>{c.complete(),y.abort(),w.unsubscribe()}}))}const f=d;r.httpSubscriptionLink=d,r.unstable_httpSubscriptionLink=f},1081:(e,r,t)=>{var n=t(633),o=t(425),s=t(6333);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}r.TRPCUntypedClient=class{$request(e){return o.createChain({links:this.links,op:{...e,context:e.context??{},id:++this.requestId}}).pipe(n.share())}async requestAsPromise(e){try{const r=this.$request(e);return(await n.observableToPromise(r)).result.data}catch(e){throw s.TRPCClientError.from(e)}}query(e,r,t){return this.requestAsPromise({type:"query",path:e,input:r,context:t?.context,signal:t?.signal})}mutation(e,r,t){return this.requestAsPromise({type:"mutation",path:e,input:r,context:t?.context,signal:t?.signal})}subscription(e,r,t){return this.$request({type:"subscription",path:e,input:r,context:t.context,signal:t.signal}).subscribe({next(e){switch(e.result.type){case"state":t.onConnectionStateChange?.(e.result);break;case"started":t.onStarted?.({context:e.context});break;case"stopped":t.onStopped?.();break;case"data":case void 0:t.onData?.(e.result.data)}},error(e){t.onError?.(e)},complete(){t.onComplete?.()}})}constructor(e){a(this,"links",void 0),a(this,"runtime",void 0),a(this,"requestId",void 0),this.requestId=0,this.runtime={},this.links=e.links.map((e=>e(this.runtime)))}}},1151:(e,r,t)=>{var n=t(9356),o=t(215),s=t(3306),a=t(3323),i=t(493);const c=Symbol("lazy");function u(e){const r=Symbol();let t=r;return()=>(t===r&&(t=e()),t)}function l(e){return"function"==typeof e&&c in e}function p(e){return i.isObject(e)&&i.isObject(e._def)&&"router"in e._def}const d={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:o.defaultFormatter,transformer:a.defaultTransformer},f=["then","call","apply"];function h(e){return function(r){const t=new Set(Object.keys(r).filter((e=>f.includes(e))));if(t.size>0)throw new Error("Reserved words used in `router({})` call: "+Array.from(t).join(", "));const n=i.omitPrototype({}),o=i.omitPrototype({});function s(e){return{ref:e.ref,load:u((async()=>{const r=await e.ref(),t=[...e.path,e.key],n=t.join(".");e.aggregate[e.key]=a(r._def.record,t),delete o[n];for(const[n,a]of Object.entries(r._def.lazy)){const r=[...t,n].join(".");o[r]=s({ref:a.ref,path:t,key:n,aggregate:e.aggregate[e.key]})}}))}}function a(e,r=[]){const t=i.omitPrototype({});for(const[i,c]of Object.entries(e??{})){if(l(c)){o[[...r,i].join(".")]=s({path:r,ref:c,key:i,aggregate:t});continue}if(p(c)){t[i]=a(c._def.record,[...r,i]);continue}if(!m(c)){t[i]=a(c,[...r,i]);continue}const e=[...r,i].join(".");if(n[e])throw new Error(`Duplicate key: ${e}`);n[e]=c,t[i]=c}return t}const c=a(r),h={_config:e,router:!0,procedures:n,lazy:o,...d,record:c};return{...c,_def:h,createCaller:b()({_def:h})}}}function m(e){return"function"==typeof e}async function y(e,r){const{_def:t}=e;let n=t.procedures[r];for(;!n;){const e=Object.keys(t.lazy).find((e=>r.startsWith(e)));if(!e)return null;const o=t.lazy[e];await o.load(),n=t.procedures[r]}return n}function b(){return function(e){const{_def:r}=e;return function(t,o){return n.createRecursiveProxy((async({path:n,args:a})=>{const c=n.join(".");if(1===n.length&&"_def"===n[0])return r;const u=await y(e,c);let l;try{if(!u)throw new s.TRPCError({code:"NOT_FOUND",message:`No procedure found on path "${n}"`});return l=i.isFunction(t)?await Promise.resolve(t()):t,await u({path:c,getRawInput:async()=>a[0],ctx:l,type:u._def.type,signal:o?.signal})}catch(e){throw o?.onError?.({ctx:l,error:s.getTRPCErrorFromUnknown(e),input:a[0],path:c,type:u?._def.type??"unknown"}),e}}))}}}r.callProcedure=async function(e){const{type:r,path:t}=e,n=await y(e.router,t);if(!n||!m(n)||n._def.type!==r&&!e.allowMethodOverride)throw new s.TRPCError({code:"NOT_FOUND",message:`No "${r}"-procedure on path "${t}"`});if(n._def.type!==r&&e.allowMethodOverride&&"subscription"===n._def.type)throw new s.TRPCError({code:"METHOD_NOT_SUPPORTED",message:"Method override is not supported for subscriptions"});return n(e)},r.createCallerFactory=b,r.createRouterFactory=h,r.getProcedureAtPath=y,r.lazy=function(e){async function r(){const r=await e();if(p(r))return r;const t=Object.values(r);if(1!==t.length||!p(t[0]))throw new Error("Invalid router module - either define exactly 1 export or return the router directly.\nExample: `lazy(() => import('./slow.js').then((m) => m.slowRouter))`");return t[0]}return r[c]=!0,r},r.mergeRouters=function(...e){const r=i.mergeWithoutOverrides({},...e.map((e=>e._def.record)));return h({errorFormatter:e.reduce(((e,r)=>{if(r._def._config.errorFormatter&&r._def._config.errorFormatter!==o.defaultFormatter){if(e!==o.defaultFormatter&&e!==r._def._config.errorFormatter)throw new Error("You seem to have several error formatters");return r._def._config.errorFormatter}return e}),o.defaultFormatter),transformer:e.reduce(((e,r)=>{if(r._def._config.transformer&&r._def._config.transformer!==a.defaultTransformer){if(e!==a.defaultTransformer&&e!==r._def._config.transformer)throw new Error("You seem to have several transformers");return r._def._config.transformer}return e}),a.defaultTransformer),isDev:e.every((e=>e._def._config.isDev)),allowOutsideOfServer:e.every((e=>e._def._config.allowOutsideOfServer)),isServer:e.every((e=>e._def._config.isServer)),$types:e[0]?._def._config.$types})(r)}},1673:(e,r,t)=>{var n=t(633),o=t(5563),s=t(6333),a=t(3697),i=t(7760);r.httpLink=function(e){const r=a.resolveHTTPLinkOptions(e);return()=>({op:t})=>n.observable((n=>{const{path:c,input:u,type:l}=t;if("subscription"===l)throw new Error("Subscriptions are unsupported by `httpLink` - use `httpSubscriptionLink` or `wsLink`");const p=(e=>{if("input"in e){const{input:r}=e;if(i.isFormData(r)){if("mutation"!==e.type&&"POST"!==e.methodOverride)throw new Error("FormData is only supported for mutations");return a.httpRequest({...e,contentTypeHeader:void 0,getUrl:a.getUrl,getBody:()=>r})}if(i.isOctetType(r)){if("mutation"!==e.type&&"POST"!==e.methodOverride)throw new Error("Octet type input is only supported for mutations");return a.httpRequest({...e,contentTypeHeader:"application/octet-stream",getUrl:a.getUrl,getBody:()=>r})}}return a.jsonHttpRequester(e)})({...r,type:l,path:c,input:u,signal:t.signal,headers:()=>e.headers?"function"==typeof e.headers?e.headers({op:t}):e.headers:{}});let d;return p.then((e=>{d=e.meta;const t=o.transformResult(e.json,r.transformer.output);t.ok?(n.next({context:e.meta,result:t.result}),n.complete()):n.error(s.TRPCClientError.from(t.error,{meta:d}))})).catch((e=>{n.error(s.TRPCClientError.from(e,{meta:d}))})),()=>{}}))}},1770:function(e,r,t){var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(o,s){function a(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(a,i)}c((n=n.apply(e,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o=t(583),s=(0,o.createTRPCClient)({links:[(0,o.httpBatchLink)({url:"http://localhost:3001"})]});n(void 0,void 0,void 0,(function*(){const e=yield s.userList.query();console.log(e)}))},1791:(e,r)=>{const t=e=>"function"==typeof e;r.getFetch=function(e){if(e)return e;if("undefined"!=typeof window&&t(window.fetch))return window.fetch;if("undefined"!=typeof globalThis&&t(globalThis.fetch))return globalThis.fetch;throw new Error("No fetch implementation found")}},1910:(e,r)=>{r.exponentialBackoff=e=>0===e?0:Math.min(1e3*2**e,3e4),r.keepAliveDefaults={enabled:!1,pongTimeoutMs:1e3,intervalMs:5e3},r.lazyDefaults={enabled:!1,closeMs:0}},1965:(e,r,t)=>{var n=t(633),o=t(5563),s=t(5507),a=t(4539),i=t(6333),c=t(3697);r.httpBatchLink=function(e){const r=c.resolveHTTPLinkOptions(e),t=e.maxURLLength??1/0,u=e.maxItems??1/0;return()=>{const l=n=>({validate(e){if(t===1/0&&u===1/0)return!0;if(e.length>u)return!1;const o=e.map((e=>e.path)).join(","),s=e.map((e=>e.input));return c.getUrl({...r,type:n,path:o,inputs:s,signal:null}).length<=t},async fetch(t){const o=t.map((e=>e.path)).join(","),s=t.map((e=>e.input)),i=a.allAbortSignals(...t.map((e=>e.signal))),u=await c.jsonHttpRequester({...r,path:o,inputs:s,type:n,headers:()=>e.headers?"function"==typeof e.headers?e.headers({opList:t}):e.headers:{},signal:i});return(Array.isArray(u.json)?u.json:t.map((()=>u.json))).map((e=>({meta:u.meta,json:e})))}}),p={query:s.dataLoader(l("query")),mutation:s.dataLoader(l("mutation"))};return({op:e})=>n.observable((t=>{if("subscription"===e.type)throw new Error("Subscriptions are unsupported by `httpLink` - use `httpSubscriptionLink` or `wsLink`");let n;return p[e.type].load(e).then((e=>{n=e;const s=o.transformResult(e.json,r.transformer.output);s.ok?(t.next({context:e.meta,result:s.result}),t.complete()):t.error(i.TRPCClientError.from(s.error,{meta:e.meta}))})).catch((e=>{t.error(i.TRPCClientError.from(e,{meta:n?.meta}))})),()=>{}}))}}},1988:(e,r,t)=>{var n=t(3565),o=t(3306),s=t(9149),a=t(493),i=t(4415),c=t(4889),u=t(2589),l=t(6875),p=t(7202),d=t(71);function f(e,r,t){if(null!=r){if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object expected.");var n,o;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(o=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else t&&e.stack.push({async:!0});return r}function h(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=new Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(h=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,o=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===o)return o=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(s).then(r,(function(e){return t(e),r()}))}else o|=1}catch(e){t(e)}if(1===o)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}const m="ping",y="serialized-error",b="connected",E="return";async function g(e){const r={stack:[],error:void 0,hasError:!1};try{const t=f(r,p.timerResource(e.timeoutMs),!1),o=await n.Unpromise.race([e.promise,t.start()]);return o===p.disposablePromiseTimerResult?await e.onTimeout():o}catch(e){r.error=e,r.hasError=!0}finally{h(r)}}r.sseHeaders={"Content-Type":"text/event-stream","Cache-Control":"no-cache, no-transform","X-Accel-Buffering":"no",Connection:"keep-alive"},r.sseStreamConsumer=function(e){const{deserialize:r=e=>e}=e;let t={};const n=e.signal;let o=null;const s=()=>new ReadableStream({async start(s){const[a,i]=await Promise.all([e.url(),e.init()]),c=o=new e.EventSource(a,i);s.enqueue({type:"connecting",eventSource:o,event:null}),c.addEventListener(b,(e=>{const r=e,n=JSON.parse(r.data);t=n,s.enqueue({type:"connected",options:n,eventSource:c})})),c.addEventListener(y,(e=>{const t=e;s.enqueue({type:"serialized-error",error:r(JSON.parse(t.data)),eventSource:c})})),c.addEventListener(m,(()=>{s.enqueue({type:"ping",eventSource:c})})),c.addEventListener(E,(()=>{c.close(),s.close(),o=null})),c.addEventListener("error",(e=>{c.readyState===c.CLOSED?s.error(e):s.enqueue({type:"connecting",eventSource:c,event:e})})),c.addEventListener("message",(e=>{const t=e,n={data:r(JSON.parse(t.data))};t.lastEventId&&(n.id=t.lastEventId),s.enqueue({type:"data",data:n,eventSource:c})}));const u=()=>{try{c.close(),s.close()}catch{}};n.aborted?u():n.addEventListener("abort",u)},cancel(){o?.close()}});return a.run((async function*(){const e={stack:[],error:void 0,hasError:!1};try{const r=f(e,(()=>{let e=s(),r=e.getReader();async function t(){await r.cancel(),o=null}return u.makeAsyncResource({read:()=>r.read(),async recreate(){await t(),e=s(),r=e.getReader()}},t)})(),!0);for(;;){let e=r.read();const n=t.reconnectAfterInactivityMs;n&&(e=g({promise:e,timeoutMs:n,onTimeout:async()=>{const e={value:{type:"timeout",ms:n,eventSource:o},done:!1};return await r.recreate(),e}}));const s=await e;if(s.done)return s.value;yield s.value}}catch(r){e.error=r,e.hasError=!0}finally{const r=h(e);r&&await r}}))},r.sseStreamProducer=function(e){const{serialize:r=a.identity}=e,t={enabled:e.ping?.enabled??!1,intervalMs:e.ping?.intervalMs??1e3},n=e.client??{};if(t.enabled&&n.reconnectAfterInactivityMs&&t.intervalMs>n.reconnectAfterInactivityMs)throw new Error(`Ping interval must be less than client reconnect interval to prevent unnecessary reconnection - ping.intervalMs: ${t.intervalMs} client.reconnectAfterInactivityMs: ${n.reconnectAfterInactivityMs}`);return l.readableStreamFrom(async function*(){try{yield*async function*(){yield{event:b,data:JSON.stringify(n)};let o,s,a=e.data;for await(o of(e.emitAndEndImmediately&&(a=c.takeWithGrace(a,{count:1,gracePeriodMs:1})),e.maxDurationMs&&e.maxDurationMs>0&&e.maxDurationMs!==1/0&&(a=c.withMaxDuration(a,{maxDurationMs:e.maxDurationMs})),t.enabled&&t.intervalMs!==1/0&&t.intervalMs>0&&(a=d.withPing(a,t.intervalMs)),a))o!==d.PING_SYM?(s=i.isTrackedEnvelope(o)?{id:o[0],data:o[1]}:{data:o},s.data=JSON.stringify(r(s.data)),yield s,o=null,s=null):yield{event:m,data:""}}(),yield{event:E,data:""}}catch(t){if(s.isAbortError(t))return;const n=o.getTRPCErrorFromUnknown(t),a=e.formatError?.({error:n})??null;yield{event:y,data:JSON.stringify(r(a))}}}()).pipeThrough(new TransformStream({transform(e,r){"event"in e&&r.enqueue(`event: ${e.event}\n`),"data"in e&&r.enqueue(`data: ${e.data}\n`),"id"in e&&r.enqueue(`id: ${e.id}\n`),"comment"in e&&r.enqueue(`: ${e.comment}\n`),r.enqueue("\n\n")}})).pipeThrough(new TextEncoderStream)}},2588:(e,r)=>{r.createDeferred=function(){let e,r;return{promise:new Promise(((t,n)=>{e=t,r=n})),resolve:e,reject:r}}},2589:(e,r)=>{var t,n;(t=Symbol).dispose??(t.dispose=Symbol()),(n=Symbol).asyncDispose??(n.asyncDispose=Symbol()),r.makeAsyncResource=function(e,r){const t=e,n=t[Symbol.asyncDispose];return t[Symbol.asyncDispose]=async()=>{await r(),await(n?.())},t},r.makeResource=function(e,r){const t=e,n=t[Symbol.dispose];return t[Symbol.dispose]=()=>{r(),n?.()},t}},2641:(e,r,t)=>{var n=t(5022);r.getParseFn=function(e){const r=e,t="~standard"in r;if("function"==typeof r&&"function"==typeof r.assert)return r.assert.bind(r);if("function"==typeof r&&!t)return r;if("function"==typeof r.parseAsync)return r.parseAsync.bind(r);if("function"==typeof r.parse)return r.parse.bind(r);if("function"==typeof r.validateSync)return r.validateSync.bind(r);if("function"==typeof r.create)return r.create.bind(r);if("function"==typeof r.assert)return e=>(r.assert(e),e);if(t)return async e=>{const t=await r["~standard"].validate(e);if(t.issues)throw new n.StandardSchemaV1Error(t.issues);return t.value};throw new Error("Could not find a validator fn")}},2692:(e,r,t)=>{var n=t(3306),o=t(493);function s(e){try{if(null===e)return null;if(!o.isObject(e))throw new Error("Expected object");const r=Object.entries(e).filter((([e,r])=>"string"!=typeof r));if(r.length>0)throw new Error(`Expected connectionParams to be string values. Got ${r.map((([e,r])=>`${e}: ${typeof r}`)).join(", ")}`);return e}catch(e){throw new n.TRPCError({code:"PARSE_ERROR",message:"Invalid connection params shape",cause:e})}}r.parseConnectionParamsFromString=function(e){let r;try{r=JSON.parse(e)}catch(e){throw new n.TRPCError({code:"PARSE_ERROR",message:"Not JSON-parsable query params",cause:e})}return s(r)},r.parseConnectionParamsFromUnknown=s},2826:(e,r,t)=>{var n=t(3306),o=t(493);function s(){function e(r){return{_middlewares:r,unstable_pipe(t){const n="_middlewares"in t?t._middlewares:[t];return e([...r,...n])}}}return function(r){return e([r])}}r.createInputMiddleware=function(e){const r=async function(r){let t;const s=await r.getRawInput();try{t=await e(s)}catch(e){throw new n.TRPCError({code:"BAD_REQUEST",cause:e})}const a=o.isObject(r.input)&&o.isObject(t)?{...r.input,...t}:t;return r.next({input:a})};return r._type="input",r},r.createMiddlewareFactory=s,r.createOutputMiddleware=function(e){const r=async function({next:r}){const t=await r();if(!t.ok)return t;try{const r=await e(t.data);return{...t,data:r}}catch(e){throw new n.TRPCError({message:"Output validation failed",code:"INTERNAL_SERVER_ERROR",cause:e})}};return r._type="output",r},r.experimental_standaloneMiddleware=()=>({create:s()}),r.middlewareMarker="middlewareMarker"},3114:(e,r,t)=>{var n=t(9174),o=t(9582);r.getErrorShape=function(e){const{path:r,error:t,config:s}=e,{code:a}=e.error,i={message:t.message,code:o.TRPC_ERROR_CODES_BY_KEY[a],data:{code:a,httpStatus:n.getHTTPStatusCodeFromError(t)}};return s.isDev&&"string"==typeof e.error.stack&&(i.data.stack=e.error.stack),"string"==typeof r&&(i.data.path=r),s.errorFormatter({...e,shape:i})}},3213:(e,r)=>{r.getTransformer=function(e){return e?"input"in e?e:{input:e,output:e}:{input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}}}},3262:(e,r,t)=>{var n=t(3306),o=t(2826),s=t(2641),a=t(493);function i(e,r){const{middlewares:t=[],inputs:n,meta:o,...s}=r;return c({...a.mergeWithoutOverrides(e,s),inputs:[...e.inputs,...n??[]],middlewares:[...e.middlewares,...t],meta:e.meta&&o?{...e.meta,...o}:o??e.meta})}function c(e={}){const r={procedure:!0,inputs:[],middlewares:[],...e};return{_def:r,input(e){const t=s.getParseFn(e);return i(r,{inputs:[e],middlewares:[o.createInputMiddleware(t)]})},output(e){const t=s.getParseFn(e);return i(r,{output:e,middlewares:[o.createOutputMiddleware(t)]})},meta:e=>i(r,{meta:e}),use(e){const t="_middlewares"in e?e._middlewares:[e];return i(r,{middlewares:t})},unstable_concat:e=>i(r,e._def),concat:e=>i(r,e._def),query:e=>u({...r,type:"query"},e),mutation:e=>u({...r,type:"mutation"},e),subscription:e=>u({...r,type:"subscription"},e),experimental_caller:e=>i(r,{caller:e})}}function u(e,r){const t=i(e,{resolver:r,middlewares:[async function(e){const t=await r(e);return{marker:o.middlewareMarker,ok:!0,data:t,ctx:e.ctx}}]}),s={...t._def,type:e.type,experimental_caller:Boolean(t._def.caller),meta:t._def.meta,$types:null},a=function(e){async function r(r){if(!r||!("getRawInput"in r))throw new Error(l);const t=await p(0,e,r);if(!t)throw new n.TRPCError({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!t.ok)throw t.error;return t.data}return r._def=e,r.procedure=!0,r.meta=e.meta,r}(t._def),c=t._def.caller;if(!c)return a;const u=async(...e)=>await c({args:e,invoke:a,_def:s});return u._def=s,u}const l="\nThis is a client-only function.\nIf you want to call this function on the server, see https://trpc.io/docs/v11/server/server-side-calls\n".trim();async function p(e,r,t){try{const n=r.middlewares[e];return await n({...t,meta:r.meta,input:t.input,next(n){const o=n;return p(e+1,r,{...t,ctx:o?.ctx?{...t.ctx,...o.ctx}:t.ctx,input:o&&"input"in o?o.input:t.input,getRawInput:o?.getRawInput??t.getRawInput})}})}catch(e){return{ok:!1,error:n.getTRPCErrorFromUnknown(e),marker:o.middlewareMarker}}}r.createBuilder=c},3306:(e,r,t)=>{var n=t(493);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class s extends Error{}function a(e){if(e instanceof Error)return e;const r=typeof e;return"undefined"!==r&&"function"!==r&&null!==e?"object"!==r?new Error(String(e)):n.isObject(e)?Object.assign(new s,e):void 0:void 0}class i extends Error{constructor(e){const r=a(e.cause);super(e.message??r?.message??e.code,{cause:r}),o(this,"cause",void 0),o(this,"code",void 0),this.code=e.code,this.name="TRPCError",this.cause??(this.cause=r)}}r.TRPCError=i,r.getCauseFromUnknown=a,r.getTRPCErrorFromUnknown=function(e){if(e instanceof i)return e;if(e instanceof Error&&"TRPCError"===e.name)return e;const r=new i({code:"INTERNAL_SERVER_ERROR",cause:e});return e instanceof Error&&e.stack&&(r.stack=e.stack),r}},3323:(e,r,t)=>{var n=t(493);function o(e,r){return"error"in r?{...r,error:e.transformer.output.serialize(r.error)}:"data"in r.result?{...r,result:{...r.result,data:e.transformer.output.serialize(r.result.data)}}:r}class s extends Error{constructor(){super("Unable to transform response from server")}}r.defaultTransformer={input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}},r.getDataTransformer=function(e){return"input"in e?e:{input:e,output:e}},r.transformResult=function(e,r){let t;try{t=function(e,r){if("error"in e){const t=r.deserialize(e.error);return{ok:!1,error:{...e,error:t}}}return{ok:!0,result:{...e.result,...(!e.result.type||"data"===e.result.type)&&{type:"data",data:r.deserialize(e.result.data)}}}}(e,r)}catch{throw new s}if(!(t.ok||n.isObject(t.error.error)&&"number"==typeof t.error.error.code))throw new s;if(t.ok&&!n.isObject(t.result))throw new s;return t},r.transformTRPCResponse=function(e,r){return Array.isArray(r)?r.map((r=>o(e,r))):o(e,r)}},3361:(e,r,t)=>{var n=t(633),o=t(425);function s(e){return Array.isArray(e)?e:[e]}r.splitLink=function(e){return r=>{const t=s(e.true).map((e=>e(r))),a=s(e.false).map((e=>e(r)));return r=>n.observable((n=>{const s=e.condition(r.op)?t:a;return o.createChain({op:r.op,links:s}).subscribe(n)}))}}},3565:(e,r)=>{function t(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const n=new WeakMap,o=()=>{};let s=Symbol.toStringTag;class a{subscribe(){let e,r;const{settlement:t}=this;if(null===t){if(null===this.subscribers)throw new Error("Unpromise settled but still has subscribers");const t=function(){let e,r;return{promise:new Promise(((t,n)=>{e=t,r=n})),resolve:e,reject:r}}();this.subscribers=(n=this.subscribers,s=t,[...n,s]),e=t.promise,r=()=>{null!==this.subscribers&&(this.subscribers=function(e,r){const t=e.indexOf(r);return-1!==t?function(e,r){return[...e.slice(0,r),...e.slice(r+1)]}(e,t):e}(this.subscribers,t))}}else{const{status:n}=t;e="fulfilled"===n?Promise.resolve(t.value):Promise.reject(t.reason),r=o}var n,s;return Object.assign(e,{unsubscribe:r})}then(e,r){const t=this.subscribe(),{unsubscribe:n}=t;return Object.assign(t.then(e,r),{unsubscribe:n})}catch(e){const r=this.subscribe(),{unsubscribe:t}=r;return Object.assign(r.catch(e),{unsubscribe:t})}finally(e){const r=this.subscribe(),{unsubscribe:t}=r;return Object.assign(r.finally(e),{unsubscribe:t})}static proxy(e){const r=a.getSubscribablePromise(e);return void 0!==r?r:a.createSubscribablePromise(e)}static createSubscribablePromise(e){const r=new a(e);return n.set(e,r),n.set(r,r),r}static getSubscribablePromise(e){return n.get(e)}static resolve(e){const r="object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e);return a.proxy(r).subscribe()}static async any(e){const r=(Array.isArray(e)?e:[...e]).map(a.resolve);try{return await Promise.any(r)}finally{r.forEach((({unsubscribe:e})=>{e()}))}}static async race(e){const r=(Array.isArray(e)?e:[...e]).map(a.resolve);try{return await Promise.race(r)}finally{r.forEach((({unsubscribe:e})=>{e()}))}}static async raceReferences(e){const r=e.map(i);try{return await Promise.race(r)}finally{for(const e of r)e.unsubscribe()}}constructor(e){t(this,"promise",void 0),t(this,"subscribers",[]),t(this,"settlement",null),t(this,s,"Unpromise"),this.promise="function"==typeof e?new Promise(e):e;const r=this.promise.then((e=>{const{subscribers:r}=this;this.subscribers=null,this.settlement={status:"fulfilled",value:e},r?.forEach((({resolve:r})=>{r(e)}))}));"catch"in r&&r.catch((e=>{const{subscribers:r}=this;this.subscribers=null,this.settlement={status:"rejected",reason:e},r?.forEach((({reject:r})=>{r(e)}))}))}}function i(e){return a.proxy(e).then((()=>[e]))}r.Unpromise=a,r.resolveSelfTuple=i},3697:(e,r,t)=>{var n=t(1791),o=t(3213);const s={query:"GET",mutation:"POST",subscription:"PATCH"};function a(e){return"input"in e?e.transformer.input.serialize(e.input):function(e){const r={};for(let t=0;t<e.length;t++){const n=e[t];r[t]=n}return r}(e.inputs.map((r=>e.transformer.input.serialize(r))))}const i=e=>{const r=e.url.split("?");let t=r[0].replace(/\/$/,"")+"/"+e.path;const n=[];if(r[1]&&n.push(r[1]),"inputs"in e&&n.push("batch=1"),"query"===e.type||"subscription"===e.type){const r=a(e);void 0!==r&&"POST"!==e.methodOverride&&n.push(`input=${encodeURIComponent(JSON.stringify(r))}`)}return n.length&&(t+="?"+n.join("&")),t},c=e=>{if("query"===e.type&&"POST"!==e.methodOverride)return;const r=a(e);return void 0!==r?JSON.stringify(r):void 0};class u extends Error{constructor(){const e="AbortError";super(e),this.name=e,this.message=e}}async function l(e){(e=>{if(e?.aborted){if(e.throwIfAborted?.(),"undefined"!=typeof DOMException)throw new DOMException("AbortError","AbortError");throw new u}})(e.signal);const r=e.getUrl(e),t=e.getBody(e),{type:o}=e,a=await(async()=>{const r=await e.headers();return Symbol.iterator in r?Object.fromEntries(r):r})(),i={...e.contentTypeHeader?{"content-type":e.contentTypeHeader}:{},...e.trpcAcceptHeader?{"trpc-accept":e.trpcAcceptHeader}:void 0,...a};return n.getFetch(e.fetch)(r,{method:e.methodOverride??s[o],signal:e.signal,body:t,headers:i})}async function p(e){const r={},t=await l(e);r.response=t;const n=await t.json();return r.responseJSON=n,{json:n,meta:r}}r.fetchHTTPResponse=l,r.getBody=c,r.getInput=a,r.getUrl=i,r.httpRequest=p,r.jsonHttpRequester=e=>p({...e,contentTypeHeader:"application/json",getUrl:i,getBody:c}),r.resolveHTTPLinkOptions=function(e){return{url:e.url.toString(),fetch:e.fetch,transformer:o.getTransformer(e.transformer),methodOverride:e.methodOverride}}},4015:(e,r,t)=>{var n=t(215),o=t(2826),s=t(3262),a=t(6712),i=t(1151),c=t(3323);class u{context(){return new u}meta(){return new u}create(e){const r={...e,transformer:c.getDataTransformer(e?.transformer??c.defaultTransformer),isDev:e?.isDev??"production"!==globalThis.process?.env.NODE_ENV,allowOutsideOfServer:e?.allowOutsideOfServer??!1,errorFormatter:e?.errorFormatter??n.defaultFormatter,isServer:e?.isServer??a.isServerDefault,$types:null};if(!(e?.isServer??a.isServerDefault)&&!0!==e?.allowOutsideOfServer)throw new Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.");return{_config:r,procedure:s.createBuilder({meta:e?.defaultMeta}),middleware:o.createMiddlewareFactory(),router:i.createRouterFactory(r),mergeRouters:i.mergeRouters,createCallerFactory:i.createCallerFactory()}}}const l=new u;r.initTRPC=l},4207:(e,r,t)=>{var n=t(6015);r.createWSClient=function(e){return new n.WsClient(e)}},4224:(e,r)=>{function t(e,r){return r(e)}r.isObservable=function(e){return"object"==typeof e&&null!==e&&"subscribe"in e},r.observable=function(e){const r={subscribe(r){let t=null,n=!1,o=!1,s=!1;function a(){null!==t?o||(o=!0,"function"==typeof t?t():t&&t.unsubscribe()):s=!0}return t=e({next(e){n||r.next?.(e)},error(e){n||(n=!0,r.error?.(e),a())},complete(){n||(n=!0,r.complete?.(),a())}}),s&&a(),{unsubscribe:a}},pipe:(...e)=>e.reduce(t,r)};return r},r.observableToAsyncIterable=function(e,r){const t=function(e,r){let t=null;const n=()=>{t?.unsubscribe(),t=null,r.removeEventListener("abort",n)};return new ReadableStream({start(o){t=e.subscribe({next(e){o.enqueue({ok:!0,value:e})},error(e){o.enqueue({ok:!1,error:e}),o.close()},complete(){o.close()}}),r.aborted?n():r.addEventListener("abort",n,{once:!0})},cancel(){n()}})}(e,r),n=t.getReader(),o={async next(){const e=await n.read();if(e.done)return{value:void 0,done:!0};const{value:r}=e;if(!r.ok)throw r.error;return{value:r.value,done:!1}},return:async()=>(await n.cancel(),{value:void 0,done:!0})};return{[Symbol.asyncIterator]:()=>o}},r.observableToPromise=function(e){const r=new AbortController;return new Promise(((t,n)=>{let o=!1;function s(){o||(o=!0,a.unsubscribe())}r.signal.addEventListener("abort",(()=>{n(r.signal.reason)}));const a=e.subscribe({next(e){o=!0,t(e),s()},error(e){n(e)},complete(){r.abort(),s()}})}))}},4415:(e,r)=>{const t=Symbol();function n(e,r){if(""===e)throw new Error("`id` must not be an empty string as empty string is the same as not setting the id at all");return[e,r,t]}r.isTrackedEnvelope=function(e){return Array.isArray(e)&&e[2]===t},r.sse=function(e){return n(e.id,e.data)},r.tracked=n},4477:(e,r)=>{r.procedureTypes=["query","mutation","subscription"]},4539:(e,r)=>{r.abortSignalToPromise=function(e){return new Promise(((r,t)=>{e.aborted?t(e.reason):e.addEventListener("abort",(()=>{t(e.reason)}),{once:!0})}))},r.allAbortSignals=function(...e){const r=new AbortController,t=e.length;let n=0;const o=()=>{++n===t&&r.abort()};for(const r of e)r?.aborted?o():r?.addEventListener("abort",o,{once:!0});return r.signal},r.raceAbortSignals=function(...e){const r=new AbortController;for(const t of e)t?.aborted?r.abort():t?.addEventListener("abort",(()=>r.abort()),{once:!0});return r.signal}},4819:(e,r,t)=>{var n=t(633),o=t(105);r.retryLink=function(e){return()=>r=>n.observable((t=>{let n,s,a;return function i(c){const u=function(){const e=r.op;return a?{...e,input:o.inputWithTrackedEventId(e.input,a)}:e}();n=r.next(u).subscribe({error(r){if(!e.retry({op:u,attempts:c,error:r}))return void t.error(r);const n=e.retryDelayMs?.(c)??0;n<=0?i(c+1):s=setTimeout((()=>i(c+1)),n)},next(e){e.result.type&&"data"!==e.result.type||!e.result.id||(a=e.result.id),t.next(e)},complete(){t.complete()}})}(1),()=>{n.unsubscribe(),clearTimeout(s)}}))}},4869:(e,r)=>{const t=e=>/^\d+$/.test(e);function n(e,r,o){if(r.length>1){const s=[...r],a=s.shift(),i=s[0];return e[a]?Array.isArray(e[a])&&!t(i)&&(e[a]=Object.fromEntries(Object.entries(e[a]))):e[a]=t(i)?[]:{},void n(e[a],s,o)}const s=r[0];void 0===e[s]?e[s]=o:Array.isArray(e[s])?e[s].push(o):e[s]=[e[s],o]}r.formDataToObject=function(e){const r={};for(const[t,o]of e.entries())n(r,t.split(/[\.\[\]]/).filter(Boolean),o);return r}},4889:(e,r,t)=>{var n=t(3565),o=t(9149),s=t(2589),a=t(7202);function i(e,r,t){if(null!=r){if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object expected.");var n,o;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(o=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else t&&e.stack.push({async:!0});return r}function c(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=new Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(c=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,o=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===o)return o=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(s).then(r,(function(e){return t(e),r()}))}else o|=1}catch(e){t(e)}if(1===o)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function u(e){const r=e[Symbol.asyncIterator]();return r[Symbol.asyncDispose]?r:s.makeAsyncResource(r,(async()=>{await(r.return?.())}))}r.iteratorResource=u,r.takeWithGrace=async function*(e,r){const t={stack:[],error:void 0,hasError:!1};try{const s=i(t,u(e),!0);let c;const l=i(t,a.timerResource(r.gracePeriodMs),!1);let p=r.count,d=new Promise((()=>{}));for(;;){if(c=await n.Unpromise.race([s.next(),d]),c===a.disposablePromiseTimerResult&&o.throwAbortError(),c.done)return c.value;yield c.value,0===--p&&(d=l.start()),c=null}}catch(e){t.error=e,t.hasError=!0}finally{const e=c(t);e&&await e}},r.withMaxDuration=async function*(e,r){const t={stack:[],error:void 0,hasError:!1};try{const s=i(t,u(e),!0),c=i(t,a.timerResource(r.maxDurationMs),!1).start();let l;for(;;){if(l=await n.Unpromise.race([s.next(),c]),l===a.disposablePromiseTimerResult&&o.throwAbortError(),l.done)return l;yield l.value,l=null}}catch(e){t.error=e,t.hasError=!0}finally{const e=c(t);e&&await e}}},5022:(e,r)=>{class t extends Error{constructor(e){var r,t;super(e[0]?.message),t=void 0,(r="issues")in this?Object.defineProperty(this,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[r]=t,this.name="SchemaError",this.issues=e}}r.StandardSchemaV1Error=t},5025:(e,r,t)=>{var n=t(9547);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class s extends Error{constructor(e){super(e.message,{cause:e.cause}),this.name="TRPCWebSocketClosedError",Object.setPrototypeOf(this,s.prototype)}}r.ResettableTimeout=class{reset(){this.timeout&&(clearTimeout(this.timeout),this.timeout=setTimeout(this.onTimeout,this.timeoutMs))}start(){clearTimeout(this.timeout),this.timeout=setTimeout(this.onTimeout,this.timeoutMs)}stop(){clearTimeout(this.timeout),this.timeout=void 0}constructor(e,r){o(this,"onTimeout",void 0),o(this,"timeoutMs",void 0),o(this,"timeout",void 0),this.onTimeout=e,this.timeoutMs=r}},r.TRPCWebSocketClosedError=s,r.buildConnectionMessage=async function(e){const r={method:"connectionParams",data:await n.resultOf(e)};return JSON.stringify(r)},r.prepareUrl=async function(e){const r=await n.resultOf(e.url);if(!e.connectionParams)return r;const t=r.includes("?")?"&":"?";return r+`${t}connectionParams=1`},r.withResolvers=function(){let e,r;return{promise:new Promise(((t,n)=>{e=t,r=n})),resolve:e,reject:r}}},5069:(e,r,t)=>{var n=t(4477),o=t(493);function s(e){if(!o.isObject(e))throw new Error("Not an object")}function a(e){if("string"!=typeof e)throw new Error("Invalid string")}r.parseTRPCMessage=function(e,r){s(e);const{id:t,jsonrpc:o,method:i,params:c}=e;if(function(e){if(null!==e&&"number"==typeof e&&isNaN(e)&&"string"!=typeof e)throw new Error("Invalid request id")}(t),function(e){if(void 0!==e&&"2.0"!==e)throw new Error("Must be JSONRPC 2.0")}(o),"subscription.stop"===i)return{id:t,jsonrpc:o,method:i};!function(e){if(!n.procedureTypes.includes(e))throw new Error("Invalid procedure type")}(i),s(c);const{input:u,path:l,lastEventId:p}=c;return a(l),void 0!==p&&a(p),{id:t,jsonrpc:o,method:i,params:{input:r.input.deserialize(u),path:l,lastEventId:p}}}},5496:(e,r,t)=>{var n=t(633),o=t(3213),s=t(4207);r.createWSClient=s.createWSClient,r.wsLink=function(e){const{client:r}=e,t=o.getTransformer(e.transformer);return()=>({op:e})=>n.observable((n=>{const o="subscription"===e.type?r.connectionState.subscribe({next(r){n.next({result:r,context:e.context})}}):null,s=r.request({op:e,transformer:t}).subscribe(n);return()=>{s.unsubscribe(),o?.unsubscribe()}}))}},5507:(e,r)=>{const t=()=>{throw new Error("Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new")};r.dataLoader=function(e){let r=null,n=null;function o(){const t=function(r){const t=[[]];let n=0;for(;;){const o=r[n];if(!o)break;const s=t[t.length-1];o.aborted?(o.reject?.(new Error("Aborted")),n++):e.validate(s.concat(o).map((e=>e.key)))?(s.push(o),n++):0!==s.length?t.push([]):(o.reject?.(new Error("Input is too big for a single dispatch")),n++)}return t}(r);clearTimeout(n),n=null,r=null;for(const r of t){if(!r.length)continue;const t={items:r};for(const e of r)e.batch=t;e.fetch(t.items.map((e=>e.key))).then((async e=>{await Promise.all(e.map((async(e,r)=>{const n=t.items[r];try{const r=await Promise.resolve(e);n.resolve?.(r)}catch(e){n.reject?.(e)}n.batch=null,n.reject=null,n.resolve=null})));for(const e of t.items)e.reject?.(new Error("Missing result")),e.batch=null})).catch((e=>{for(const r of t.items)r.reject?.(e),r.batch=null}))}}return{load:function(e){const s={aborted:!1,key:e,batch:null,resolve:t,reject:t},a=new Promise(((e,t)=>{s.reject=t,s.resolve=e,r??(r=[]),r.push(s)}));return n??(n=setTimeout(o)),a}}}},5550:(e,r,t)=>{var n=t(4224),o=t(3114),s=t(3306),a=t(8919),i=t(1988),c=t(3323),u=t(493),l=t(8552),p=t(9174);function d(e){return u.run((async function*(){throw e}))}const f={mutation:["POST"],query:["GET"],subscription:["GET"]},h={mutation:["POST"],query:["GET","POST"],subscription:["GET","POST"]};function m(e){const{ctx:r,info:t,responseMeta:n,untransformedJSON:o,errors:s=[],headers:a}=e;let i=o?p.getHTTPStatusCode(o):200;const c=!o,u=c?[]:Array.isArray(o)?o:[o],l=n?.({ctx:r,info:t,paths:t?.calls.map((e=>e.path)),data:u,errors:s,eagerGeneration:c,type:t?.calls.find((e=>e.procedure?._def.type))?.procedure?._def.type??"unknown"})??{};if(l.headers)if(l.headers instanceof Headers)for(const[e,r]of l.headers.entries())a.append(e,r);else for(const[e,r]of Object.entries(l.headers))if(Array.isArray(r))for(const t of r)a.append(e,t);else"string"==typeof r&&a.set(e,r);return l.status&&(i=l.status),{status:i}}function y(e){return!!u.isObject(e)&&(!!u.isAsyncIterable(e)||Object.values(e).some(a.isPromise)||Object.values(e).some(u.isAsyncIterable))}r.resolveResponse=async function(e){const{router:r,req:t}=e,p=new Headers([["vary","trpc-accept"]]),b=r._def._config,E=new URL(t.url);if("HEAD"===t.method)return new Response(null,{status:204});const g=e.allowBatching??e.batching?.enabled??!0,w=(e.allowMethodOverride??!1)&&"POST"===t.method,v=await u.run((async()=>{try{return[void 0,await l.getRequestInfo({req:t,path:decodeURIComponent(e.path),router:r,searchParams:E.searchParams,headers:e.req.headers,url:E})]}catch(e){return[s.getTRPCErrorFromUnknown(e),void 0]}})),R=u.run((()=>{let r;return{valueOrUndefined:()=>{if(r)return r[1]},value:()=>{const[e,t]=r;if(e)throw e;return t},create:async t=>{if(r)throw new Error("This should only be called once - report a bug in tRPC");try{const n=await e.createContext({info:t});r=[void 0,n]}catch(e){r=[s.getTRPCErrorFromUnknown(e),void 0]}}}})),T=w?h:f,P="application/jsonl"===t.headers.get("trpc-accept"),S=b.sse?.enabled??!0;try{const[r,l]=v;if(r)throw r;if(l.isBatchCall&&!g)throw new s.TRPCError({code:"BAD_REQUEST",message:"Batching is not enabled on the server"});if(P&&!l.isBatchCall)throw new s.TRPCError({message:"Streaming requests must be batched (you can do a batch of 1)",code:"BAD_REQUEST"});await R.create(l);const f=l.calls.map((async r=>{const n=r.procedure;try{if(e.error)throw e.error;if(!n)throw new s.TRPCError({code:"NOT_FOUND",message:`No procedure found on path "${r.path}"`});if(!T[n._def.type].includes(t.method))throw new s.TRPCError({code:"METHOD_NOT_SUPPORTED",message:`Unsupported ${t.method}-request to ${n._def.type} procedure at path "${r.path}"`});if("subscription"===n._def.type&&l.isBatchCall)throw new s.TRPCError({code:"BAD_REQUEST",message:"Cannot batch subscription calls"});return[void 0,{data:await n({path:r.path,getRawInput:r.getRawInput,ctx:R.value(),type:n._def.type,signal:e.req.signal})}]}catch(t){const n=s.getTRPCErrorFromUnknown(t),o=r.result();return e.onError?.({error:n,path:r.path,input:o,ctx:R.valueOrUndefined(),type:r.procedure?._def.type??"unknown",req:e.req}),[n,void 0]}}));if(!l.isBatchCall){const[r]=l.calls,[t,a]=await f[0];switch(l.type){case"unknown":case"mutation":case"query":{if(p.set("content-type","application/json"),y(a?.data))throw new s.TRPCError({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"});const n=t?{error:o.getErrorShape({config:b,ctx:R.valueOrUndefined(),error:t,input:r.result(),path:r.path,type:l.type})}:{result:{data:a.data}},i=m({ctx:R.valueOrUndefined(),info:l,responseMeta:e.responseMeta,errors:t?[t]:[],headers:p,untransformedJSON:[n]});return new Response(JSON.stringify(c.transformTRPCResponse(b,n)),{status:i.status,headers:p})}case"subscription":{const c=u.run((()=>t?d(t):S?n.isObservable(a.data)||u.isAsyncIterable(a.data)?n.isObservable(a.data)?n.observableToAsyncIterable(a.data,e.req.signal):a.data:d(new s.TRPCError({message:`Subscription ${r.path} did not return an observable or a AsyncGenerator`,code:"INTERNAL_SERVER_ERROR"})):d(new s.TRPCError({code:"METHOD_NOT_SUPPORTED",message:'Missing experimental flag "sseSubscriptions"'})))),f=i.sseStreamProducer({...b.sse,data:c,serialize:e=>b.transformer.output.serialize(e),formatError(t){const n=s.getTRPCErrorFromUnknown(t.error),a=r?.result(),i=r?.path,c=r?.procedure?._def.type??"unknown";return e.onError?.({error:n,path:i,input:a,ctx:R.valueOrUndefined(),req:e.req,type:c}),o.getErrorShape({config:b,ctx:R.valueOrUndefined(),error:n,input:a,path:i,type:c})}});for(const[e,r]of Object.entries(i.sseHeaders))p.set(e,r);const h=m({ctx:R.valueOrUndefined(),info:l,responseMeta:e.responseMeta,errors:[],headers:p,untransformedJSON:null});return new Response(f,{headers:p,status:h.status})}}}if("application/jsonl"===l.accept){p.set("content-type","application/json"),p.set("transfer-encoding","chunked");const r=m({ctx:R.valueOrUndefined(),info:l,responseMeta:e.responseMeta,errors:[],headers:p,untransformedJSON:null}),t=a.jsonlStreamProducer({...b.jsonl,maxDepth:1/0,data:f.map((async r=>{const[t,s]=await r,a=l.calls[0];if(t)return{error:o.getErrorShape({config:b,ctx:R.valueOrUndefined(),error:t,input:a.result(),path:a.path,type:a.procedure?._def.type??"unknown"})};const i=n.isObservable(s.data)?n.observableToAsyncIterable(s.data,e.req.signal):Promise.resolve(s.data);return{result:Promise.resolve({data:i})}})),serialize:b.transformer.output.serialize,onError:r=>{e.onError?.({error:s.getTRPCErrorFromUnknown(r),path:void 0,input:void 0,ctx:R.valueOrUndefined(),req:e.req,type:l?.type??"unknown"})},formatError(e){const r=l?.calls[e.path[0]],t=s.getTRPCErrorFromUnknown(e.error),n=r?.result(),a=r?.path,i=r?.procedure?._def.type??"unknown";return o.getErrorShape({config:b,ctx:R.valueOrUndefined(),error:t,input:n,path:a,type:i})}});return new Response(t,{headers:p,status:r.status})}p.set("content-type","application/json");const h=(await Promise.all(f)).map((e=>{const[r,t]=e;return r?e:y(t.data)?[new s.TRPCError({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"}),void 0]:e})),E=h.map((([e,r],t)=>{const n=l.calls[t];return e?{error:o.getErrorShape({config:b,ctx:R.valueOrUndefined(),error:e,input:n.result(),path:n.path,type:n.procedure?._def.type??"unknown"})}:{result:{data:r.data}}})),w=h.map((([e])=>e)).filter(Boolean),O=m({ctx:R.valueOrUndefined(),info:l,responseMeta:e.responseMeta,untransformedJSON:E,errors:w,headers:p});return new Response(JSON.stringify(c.transformTRPCResponse(b,E)),{status:O.status,headers:p})}catch(r){const[t,n]=v,a=R.valueOrUndefined(),{error:i,untransformedJSON:u,body:l}=function(e,r){const{router:t,req:n,onError:a}=r.opts,i=s.getTRPCErrorFromUnknown(e);a?.({error:i,path:r.path,input:r.input,ctx:r.ctx,type:r.type,req:n});const u={error:o.getErrorShape({config:t._def._config,error:i,type:r.type,path:r.path,input:r.input,ctx:r.ctx})},l=c.transformTRPCResponse(t._def._config,u);return{error:i,untransformedJSON:u,body:JSON.stringify(l)}}(r,{opts:e,ctx:R.valueOrUndefined(),type:n?.type??"unknown"}),d=m({ctx:a,info:n,responseMeta:e.responseMeta,untransformedJSON:u,errors:[i],headers:p});return new Response(l,{status:d.status,headers:p})}}},5563:(e,r,t)=>{var n=t(9356),o=t(215),s=t(3114),a=t(3306),i=t(8552),c=t(7214),u=t(4869),l=t(9174),p=t(9149),d=t(2692),f=t(5550),h=t(4015),m=t(2826),y=t(2641),b=t(4477),E=t(3262),g=t(6712),w=t(1151),v=t(9582),R=t(5069),T=t(8919),P=t(1988),S=t(4415),O=t(2588),C=t(2589),_=t(4889),k=t(3323),x=t(493),A=t(5022),D=t(3565);r.createFlatProxy=n.createFlatProxy,r.createRecursiveProxy=n.createRecursiveProxy,r.defaultFormatter=o.defaultFormatter,r.getErrorShape=s.getErrorShape,r.TRPCError=a.TRPCError,r.getCauseFromUnknown=a.getCauseFromUnknown,r.getTRPCErrorFromUnknown=a.getTRPCErrorFromUnknown,r.getRequestInfo=i.getRequestInfo,r.octetInputParser=c.octetInputParser,r.formDataToObject=u.formDataToObject,r.HTTP_CODE_TO_JSONRPC2=l.HTTP_CODE_TO_JSONRPC2,r.JSONRPC2_TO_HTTP_CODE=l.JSONRPC2_TO_HTTP_CODE,r.getHTTPStatusCode=l.getHTTPStatusCode,r.getHTTPStatusCodeFromError=l.getHTTPStatusCodeFromError,r.getStatusCodeFromKey=l.getStatusCodeFromKey,r.getStatusKeyFromCode=l.getStatusKeyFromCode,r.isAbortError=p.isAbortError,r.throwAbortError=p.throwAbortError,r.parseConnectionParamsFromString=d.parseConnectionParamsFromString,r.parseConnectionParamsFromUnknown=d.parseConnectionParamsFromUnknown,r.resolveResponse=f.resolveResponse,r.initTRPC=h.initTRPC,r.createInputMiddleware=m.createInputMiddleware,r.createMiddlewareFactory=m.createMiddlewareFactory,r.createOutputMiddleware=m.createOutputMiddleware,r.experimental_standaloneMiddleware=m.experimental_standaloneMiddleware,r.middlewareMarker=m.middlewareMarker,r.getParseFn=y.getParseFn,r.procedureTypes=b.procedureTypes,r.createBuilder=E.createBuilder,r.isServerDefault=g.isServerDefault,r.callProcedure=w.callProcedure,r.createCallerFactory=w.createCallerFactory,r.createRouterFactory=w.createRouterFactory,r.getProcedureAtPath=w.getProcedureAtPath,r.lazy=w.lazy,r.mergeRouters=w.mergeRouters,r.TRPC_ERROR_CODES_BY_KEY=v.TRPC_ERROR_CODES_BY_KEY,r.TRPC_ERROR_CODES_BY_NUMBER=v.TRPC_ERROR_CODES_BY_NUMBER,r.retryableRpcCodes=v.retryableRpcCodes,r.parseTRPCMessage=R.parseTRPCMessage,r.isPromise=T.isPromise,r.jsonlStreamConsumer=T.jsonlStreamConsumer,r.jsonlStreamProducer=T.jsonlStreamProducer,r.sseHeaders=P.sseHeaders,r.sseStreamConsumer=P.sseStreamConsumer,r.sseStreamProducer=P.sseStreamProducer,r.isTrackedEnvelope=S.isTrackedEnvelope,r.sse=S.sse,r.tracked=S.tracked,r.createDeferred=O.createDeferred,r.makeAsyncResource=C.makeAsyncResource,r.makeResource=C.makeResource,r.iteratorResource=_.iteratorResource,r.takeWithGrace=_.takeWithGrace,r.withMaxDuration=_.withMaxDuration,r.defaultTransformer=k.defaultTransformer,r.getDataTransformer=k.getDataTransformer,r.transformResult=k.transformResult,r.transformTRPCResponse=k.transformTRPCResponse,r.abortSignalsAnyPonyfill=x.abortSignalsAnyPonyfill,r.assert=x.assert,r.identity=x.identity,r.isAsyncIterable=x.isAsyncIterable,r.isFunction=x.isFunction,r.isObject=x.isObject,r.mergeWithoutOverrides=x.mergeWithoutOverrides,r.noop=x.noop,r.omitPrototype=x.omitPrototype,r.run=x.run,r.sleep=x.sleep,r.unsetMarker=x.unsetMarker,r.StandardSchemaV1Error=A.StandardSchemaV1Error,r.Unpromise=D.Unpromise},6015:(e,r,t)=>{var n=t(633),o=t(5563),s=t(6333),a=t(1910),i=t(7834),c=t(5025),u=t(9132);function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}r.WsClient=class{async open(){this.allowReconnect=!0,"connecting"!==this.connectionState.get().state&&this.connectionState.next({type:"state",state:"connecting",error:null});try{await this.activeConnection.open()}catch(e){return this.reconnect(new c.TRPCWebSocketClosedError({message:"Initialization error",cause:e})),this.reconnecting}}async close(){this.allowReconnect=!1,this.inactivityTimeout.stop();const e=[];for(const r of this.requestManager.getRequests())"subscription"===r.message.method?r.callbacks.complete():"outgoing"===r.state?r.callbacks.error(s.TRPCClientError.from(new c.TRPCWebSocketClosedError({message:"Closed before connection was established"}))):e.push(r.end);await Promise.all(e).catch((()=>null)),await this.activeConnection.close().catch((()=>null)),this.connectionState.next({type:"state",state:"idle",error:null})}request({op:{id:e,type:r,path:t,input:a,signal:i},transformer:c,lastEventId:u}){return n.observable((n=>{const l=this.batchSend({id:e,method:r,params:{input:c.input.serialize(a),path:t,lastEventId:u}},{...n,next(e){const r=o.transformResult(e,c.output);r.ok?n.next({result:r.result}):n.error(s.TRPCClientError.from(r.error))}});return()=>{l(),"subscription"===r&&this.activeConnection.isOpen()&&this.send({id:e,method:"subscription.stop"}),i?.removeEventListener("abort",l)}}))}get connection(){return u.backwardCompatibility(this.activeConnection)}reconnect(e){if(this.connectionState.next({type:"state",state:"connecting",error:s.TRPCClientError.from(e)}),this.reconnecting)return;const r=async e=>{try{await o.sleep(this.reconnectRetryDelay(e)),this.allowReconnect&&(await this.activeConnection.close(),await this.activeConnection.open(),this.requestManager.hasPendingRequests()&&this.send(this.requestManager.getPendingRequests().map((({message:e})=>e)))),this.reconnecting=null}catch{await r(e+1)}};this.reconnecting=r(0)}setupWebSocketListeners(e){const r=e=>{const r=this.requestManager.getPendingRequests();for(const{message:t,callbacks:n}of r)"subscription"!==t.method&&(n.error(s.TRPCClientError.from(e??new c.TRPCWebSocketClosedError({message:"WebSocket closed",cause:e}))),this.requestManager.delete(t.id))};e.addEventListener("open",(()=>{o.run((async()=>{this.lazyMode&&this.inactivityTimeout.start(),this.callbacks.onOpen?.(),this.connectionState.next({type:"state",state:"pending",error:null})})).catch((t=>{e.close(3e3),r(t)}))})),e.addEventListener("message",(({data:e})=>{if(this.inactivityTimeout.reset(),"string"!=typeof e||["PING","PONG"].includes(e))return;const r=JSON.parse(e);"method"in r?this.handleIncomingRequest(r):this.handleResponseMessage(r)})),e.addEventListener("close",(e=>{r(e),this.callbacks.onClose?.(e),this.lazyMode&&!this.requestManager.hasPendingSubscriptions()||this.reconnect(new c.TRPCWebSocketClosedError({message:"WebSocket closed",cause:e}))})),e.addEventListener("error",(e=>{r(e),this.callbacks.onError?.(e),this.reconnect(new c.TRPCWebSocketClosedError({message:"WebSocket closed",cause:e}))}))}handleResponseMessage(e){const r=this.requestManager.getPendingRequest(e.id);if(!r)return;r.callbacks.next(e);let t=!0;"result"in e&&"subscription"===r.message.method&&("data"===e.result.type&&(r.message.params.lastEventId=e.result.id),"stopped"!==e.result.type&&(t=!1)),t&&(r.callbacks.complete(),this.requestManager.delete(e.id))}handleIncomingRequest(e){"reconnect"===e.method&&this.reconnect(new c.TRPCWebSocketClosedError({message:"Server requested reconnect"}))}send(e){if(!this.activeConnection.isOpen())throw new Error("Active connection is not open");const r=e instanceof Array?e:[e];this.activeConnection.ws.send(JSON.stringify(1===r.length?r[0]:r))}batchSend(e,r){return this.inactivityTimeout.reset(),o.run((async()=>{this.activeConnection.isOpen()||await this.open(),await o.sleep(0),this.requestManager.hasOutgoingRequests()&&this.send(this.requestManager.flush().map((({message:e})=>e)))})).catch((t=>{this.requestManager.delete(e.id),r.error(s.TRPCClientError.from(t))})),this.requestManager.register(e,r)}constructor(e){l(this,"connectionState",void 0),l(this,"allowReconnect",!1),l(this,"requestManager",new i.RequestManager),l(this,"activeConnection",void 0),l(this,"reconnectRetryDelay",void 0),l(this,"inactivityTimeout",void 0),l(this,"callbacks",void 0),l(this,"lazyMode",void 0),l(this,"reconnecting",null),this.callbacks={onOpen:e.onOpen,onClose:e.onClose,onError:e.onError};const r={...a.lazyDefaults,...e.lazy};this.inactivityTimeout=new c.ResettableTimeout((()=>{this.requestManager.hasOutgoingRequests()||this.requestManager.hasPendingRequests()?this.inactivityTimeout.reset():this.close().catch((()=>null))}),r.closeMs),this.activeConnection=new u.WsConnection({WebSocketPonyfill:e.WebSocket,urlOptions:e,keepAlive:{...a.keepAliveDefaults,...e.keepAlive}}),this.activeConnection.wsObservable.subscribe({next:e=>{e&&this.setupWebSocketListeners(e)}}),this.reconnectRetryDelay=e.retryDelayMs??a.exponentialBackoff,this.lazyMode=r.enabled,this.connectionState=n.behaviorSubject({type:"state",state:r.enabled?"idle":"connecting",error:null}),this.lazyMode||this.open().catch((()=>null))}}},6333:(e,r,t)=>{var n=t(5563);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e){return e instanceof a}class a extends Error{static from(e,r={}){const t=e;return s(t)?(r.meta&&(t.meta={...t.meta,...r.meta}),t):(o=t,n.isObject(o)&&n.isObject(o.error)&&"number"==typeof o.error.code&&"string"==typeof o.error.message?new a(t.error.message,{...r,result:t}):new a("string"==typeof(i=t)?i:n.isObject(i)&&"string"==typeof i.message?i.message:"Unknown error",{...r,cause:t}));var o,i}constructor(e,r){const t=r?.cause;super(e,{cause:t}),o(this,"cause",void 0),o(this,"shape",void 0),o(this,"data",void 0),o(this,"meta",void 0),this.meta=r?.meta,this.cause=t,this.shape=r?.result?.error,this.data=r?.result?.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,a.prototype)}}r.TRPCClientError=a,r.isTRPCClientError=s},6712:(e,r)=>{const t="undefined"==typeof window||"Deno"in window||"test"===globalThis.process?.env?.NODE_ENV||!!globalThis.process?.env?.JEST_WORKER_ID||!!globalThis.process?.env?.VITEST_WORKER_ID;r.isServerDefault=t},6875:(e,r)=>{r.readableStreamFrom=function(e){const r=e[Symbol.asyncIterator]();return new ReadableStream({async cancel(){await(r.return?.())},async pull(e){const t=await r.next();t.done?e.close():e.enqueue(t.value)}})}},7138:(e,r,t)=>{var n=t(7867),o=t(633),s=t(968),a=t(5563),i=t(105),c=t(4539),u=t(3213),l=t(6333);function p(e,r,t){if(null!=r){if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object expected.");var n,o;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(o=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else t&&e.stack.push({async:!0});return r}function d(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=new Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(d=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,o=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===o)return o=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(s).then(r,(function(e){return t(e),r()}))}else o|=1}catch(e){t(e)}if(1===o)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}r.experimental_localLink=function(e){const r=u.getTransformer(e.transformer),t=t=>{if(e.transformer)return t;if(void 0===t)return t;const n=JSON.stringify(r.input.serialize(t));return JSON.parse(r.output.deserialize(n))};return()=>({op:r})=>o.observable((u=>{let f;const h=new AbortController,m=c.raceAbortSignals(r.signal,h.signal),y=c.abortSignalToPromise(m);y.catch((()=>{}));let b=r.input;async function E(t){return b=t,f=await e.createContext(),a.callProcedure({router:e.router,path:r.path,getRawInput:async()=>t,ctx:f,type:r.type,signal:m})}function g(t){a.isAbortError(t)||e.onError?.({error:n.getTRPCErrorFromUnknown(t),type:r.type,path:r.path,input:b,ctx:f})}function w(o){if(l.isTRPCClientError(o))return o;const s=n.getTRPCErrorFromUnknown(o),a=n.getTRPCErrorShape({config:e.router._def._config,ctx:f,error:s,input:b,path:r.path,type:r.type});return l.TRPCClientError.from({error:t(a)})}return a.run((async()=>{switch(r.type){case"query":case"mutation":{const e=await E(r.input);if(!a.isAsyncIterable(e)){u.next({result:{data:t(e)}}),u.complete();break}u.next({result:{data:async function*(){const r={stack:[],error:void 0,hasError:!1};try{const n=p(r,a.iteratorResource(e),!0);p(r,a.makeResource({},(()=>{u.complete()})),!1);try{for(;;){const e=await Promise.race([n.next(),y]);if(e.done)return t(e.value);yield t(e.value)}}catch(e){throw g(e),w(e)}}catch(e){r.error=e,r.hasError=!0}finally{const e=d(r);e&&await e}}()}});break}case"subscription":{const e={stack:[],error:void 0,hasError:!1};try{const c=o.behaviorSubject({type:"state",state:"connecting",error:null}),l=c.subscribe({next(e){u.next({result:e})}});let f;for(p(e,a.makeResource({},(async()=>{u.complete(),c.next({type:"state",state:"idle",error:null}),l.unsubscribe()})),!1);;){const e={stack:[],error:void 0,hasError:!1};try{const o=await E(i.inputWithTrackedEventId(r.input,f));if(!a.isAsyncIterable(o))throw new Error("Expected an async iterable");const l=p(e,a.iteratorResource(o),!0);for(u.next({result:{type:"started"}}),c.next({type:"state",state:"pending",error:null});;){let e,r;try{e=await Promise.race([l.next(),y])}catch(e){if(a.isAbortError(e))return;const r=n.getTRPCErrorFromUnknown(e);if(!a.retryableRpcCodes.includes(s.TRPC_ERROR_CODES_BY_KEY[r.code]))throw w(r);g(r),c.next({type:"state",state:"connecting",error:w(r)});break}if(e.done)return;n.isTrackedEnvelope(e.value)?(f=e.value[0],r={id:e.value[0],data:{id:e.value[0],data:e.value[1]}}):r={data:e.value},u.next({result:{...r,data:t(r.data)}})}}catch(r){e.error=r,e.hasError=!0}finally{const r=d(e);r&&await r}}break}catch(r){e.error=r,e.hasError=!0}finally{d(e)}}}})).catch((e=>{g(e),u.error(w(e))})),()=>{h.abort()}}))}},7202:(e,r,t)=>{var n=t(2589);const o=Symbol();r.disposablePromiseTimerResult=o,r.timerResource=function(e){let r=null;return n.makeResource({start(){if(r)throw new Error("Timer already started");return new Promise((t=>{r=setTimeout((()=>t(o)),e)}))}},(()=>{r&&clearTimeout(r)}))}},7214:(e,r)=>{const t={_input:null,_output:null,parse(e){if(e instanceof ReadableStream)return e;throw new Error("Parsed input was expected to be a ReadableStream but was: "+typeof e)}};r.octetInputParser=t},7711:(e,r,t)=>{var n=t(5563),o=t(1081);const s=Symbol.for("trpc_untypedClient"),a={query:"query",mutate:"mutation",subscribe:"subscription"},i=e=>a[e];function c(e){const r=n.createRecursiveProxy((({path:r,args:t})=>{const n=[...r],o=i(n.pop()),s=n.join(".");return e[o](s,...t)}));return n.createFlatProxy((t=>t===s?e:r[t]))}r.clientCallTypeToProcedureType=i,r.createTRPCClient=function(e){return c(new o.TRPCUntypedClient(e))},r.createTRPCClientProxy=c,r.getUntypedClient=function(e){return e[s]}},7760:(e,r)=>{function t(e){return e instanceof Uint8Array||e instanceof Blob}function n(e){return e instanceof FormData}r.isFormData=n,r.isNonJsonSerializable=function(e){return t(e)||n(e)},r.isOctetType=t},7834:(e,r,t)=>{var n=t(5025);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}r.RequestManager=class{register(e,r){const{promise:t,resolve:o}=n.withResolvers();return this.outgoingRequests.push({id:String(e.id),message:e,end:t,callbacks:{next:r.next,complete:()=>{r.complete(),o()},error:e=>{r.error(e),o()}}}),()=>{this.delete(e.id),r.complete(),o()}}delete(e){null!==e&&(this.outgoingRequests=this.outgoingRequests.filter((({id:r})=>r!==String(e))),delete this.pendingRequests[String(e)])}flush(){const e=this.outgoingRequests;this.outgoingRequests=[];for(const r of e)this.pendingRequests[r.id]=r;return e}getPendingRequests(){return Object.values(this.pendingRequests)}getPendingRequest(e){return null===e?null:this.pendingRequests[String(e)]}getOutgoingRequests(){return this.outgoingRequests}getRequests(){return[...this.getOutgoingRequests().map((e=>({state:"outgoing",message:e.message,end:e.end,callbacks:e.callbacks}))),...this.getPendingRequests().map((e=>({state:"pending",message:e.message,end:e.end,callbacks:e.callbacks})))]}hasPendingRequests(){return this.getPendingRequests().length>0}hasPendingSubscriptions(){return this.getPendingRequests().some((e=>"subscription"===e.message.method))}hasOutgoingRequests(){return this.outgoingRequests.length>0}constructor(){o(this,"outgoingRequests",new Array),o(this,"pendingRequests",{})}}},7859:(e,r,t)=>{var n=t(4224);r.behaviorSubject=function(e){let r=e;const t=[],o=n.observable((e=>((e=>{void 0!==r&&e.next(r),t.push(e)})(e),()=>{(e=>{t.splice(t.indexOf(e),1)})(e)})));return o.next=e=>{if(r!==e){r=e;for(const r of t)r.next(e)}},o.get=()=>r,o}},7867:(e,r,t)=>{var n=t(9356),o=t(3114),s=t(3306),a=t(1151);t(9582),t(3565),t(2589);var i=t(4415),c=t(3323),u=t(4015),l=t(2826),p=t(5022);t(6712),r.createTRPCFlatProxy=n.createFlatProxy,r.createTRPCRecursiveProxy=n.createRecursiveProxy,r.getErrorShape=o.getErrorShape,r.getTRPCErrorShape=o.getErrorShape,r.TRPCError=s.TRPCError,r.getTRPCErrorFromUnknown=s.getTRPCErrorFromUnknown,r.callTRPCProcedure=a.callProcedure,r.experimental_lazy=a.lazy,r.lazy=a.lazy,r.isTrackedEnvelope=i.isTrackedEnvelope,r.sse=i.sse,r.tracked=i.tracked,r.transformTRPCResponse=c.transformTRPCResponse,r.initTRPC=u.initTRPC,r.experimental_standaloneMiddleware=l.experimental_standaloneMiddleware,r.experimental_trpcMiddleware=l.experimental_standaloneMiddleware,r.StandardSchemaV1Error=p.StandardSchemaV1Error},8165:(e,r,t)=>{var n=t(633);const o={css:{query:["72e3ff","3fb0d8"],mutation:["c5a3fc","904dfc"],subscription:["ff49e1","d83fbe"]},ansi:{regular:{query:["[30;46m","[97;46m"],mutation:["[30;45m","[97;45m"],subscription:["[30;42m","[97;42m"]},bold:{query:["[1;30;46m","[1;97;46m"],mutation:["[1;30;45m","[1;97;45m"],subscription:["[1;30;42m","[1;97;42m"]}}},s=({c:e=console,colorMode:r="css",withContext:t})=>n=>{const s=n.input,a="undefined"!=typeof FormData&&s instanceof FormData?Object.fromEntries(s):s;const{parts:i,args:c}=function(e){const{direction:r,type:t,withContext:n,path:s,id:a,input:i}=e,c=[],u=[];if("none"===e.colorMode)c.push("up"===r?">>":"<<",t,`#${a}`,s);else if("ansi"===e.colorMode){const[e,n]=o.ansi.regular[t],[i,u]=o.ansi.bold[t],l="[0m";c.push("up"===r?e:n,"up"===r?">>":"<<",t,"up"===r?i:u,`#${a}`,s,l)}else{const[e,n]=o.css[t],i=`\n    background-color: #${"up"===r?e:n};\n    color: ${"up"===r?"black":"white"};\n    padding: 2px;\n  `;c.push("%c","up"===r?">>":"<<",t,`#${a}`,`%c${s}%c`,"%O"),u.push(i,`${i}; font-weight: bold;`,`${i}; font-weight: normal;`)}return"up"===r?u.push(n?{input:i,context:e.context}:{input:i}):u.push({input:i,result:e.result,elapsedMs:e.elapsedMs,...n&&{context:e.context}}),{parts:c,args:u}}({...n,colorMode:r,input:a,withContext:t}),u="down"===n.direction&&n.result&&(n.result instanceof Error||"error"in n.result.result&&n.result.result.error)?"error":"log";e[u].apply(null,[i.join(" ")].concat(c))};r.loggerLink=function(e={}){const{enabled:r=()=>!0}=e,t=e.colorMode??("undefined"==typeof window?"ansi":"css"),o=e.withContext??"css"===t,{logger:a=s({c:e.console,colorMode:t,withContext:o})}=e;return()=>({op:e,next:t})=>n.observable((o=>{r({...e,direction:"up"})&&a({...e,direction:"up"});const s=Date.now();function i(t){const n=Date.now()-s;r({...e,direction:"down",result:t})&&a({...e,direction:"down",elapsedMs:n,result:t})}return t(e).pipe(n.tap({next(e){i(e)},error(e){i(e)}})).subscribe(o)}))}},8552:(e,r,t)=>{var n=t(3306),o=t(1151),s=t(493),a=t(2692);function i(e){let r=null,t=s.unsetMarker;return{read:async()=>(t!==s.unsetMarker||(r??(r=e().catch((e=>{if(e instanceof n.TRPCError)throw e;throw new n.TRPCError({code:"BAD_REQUEST",message:e instanceof Error?e.message:"Invalid input",cause:e})}))),t=await r,r=null),t),result:()=>t!==s.unsetMarker?t:void 0}}const c={isMatch:e=>!!e.headers.get("content-type")?.startsWith("application/json"),async parse(e){const{req:r}=e,t="1"===e.searchParams.get("batch"),c=t?e.path.split(","):[e.path],u=i((async()=>{let o;if("GET"===r.method){const r=e.searchParams.get("input");r&&(o=JSON.parse(r))}else o=await r.json();if(void 0===o)return{};if(!t)return{0:e.router._def._config.transformer.input.deserialize(o)};if(!s.isObject(o))throw new n.TRPCError({code:"BAD_REQUEST",message:'"input" needs to be an object when doing a batch call'});const a={};for(const r of c.keys()){const t=o[r];void 0!==t&&(a[r]=e.router._def._config.transformer.input.deserialize(t))}return a})),l=await Promise.all(c.map((async(r,t)=>{const n=await o.getProcedureAtPath(e.router,r);return{path:r,procedure:n,getRawInput:async()=>{let r=(await u.read())[t];if("subscription"===n?._def.type){const t=e.headers.get("last-event-id")??e.searchParams.get("lastEventId")??e.searchParams.get("Last-Event-Id");t&&(s.isObject(r)?r={...r,lastEventId:t}:r??(r={lastEventId:t}))}return r},result:()=>u.result()?.[t]}}))),p=new Set(l.map((e=>e.procedure?._def.type)).filter(Boolean));if(p.size>1)throw new n.TRPCError({code:"BAD_REQUEST",message:`Cannot mix procedure types in call: ${Array.from(p).join(", ")}`});const d=p.values().next().value??"unknown",f=e.searchParams.get("connectionParams");return{isBatchCall:t,accept:r.headers.get("trpc-accept"),calls:l,type:d,connectionParams:null===f?null:a.parseConnectionParamsFromString(f),signal:r.signal,url:e.url}}},u=[c,{isMatch:e=>!!e.headers.get("content-type")?.startsWith("multipart/form-data"),async parse(e){const{req:r}=e;if("POST"!==r.method)throw new n.TRPCError({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for multipart/form-data requests"});const t=i((async()=>await r.formData())),s=await o.getProcedureAtPath(e.router,e.path);return{accept:null,calls:[{path:e.path,getRawInput:t.read,result:t.result,procedure:s}],isBatchCall:!1,type:"mutation",connectionParams:null,signal:r.signal,url:e.url}}},{isMatch:e=>!!e.headers.get("content-type")?.startsWith("application/octet-stream"),async parse(e){const{req:r}=e;if("POST"!==r.method)throw new n.TRPCError({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for application/octet-stream requests"});const t=i((async()=>r.body));return{calls:[{path:e.path,getRawInput:t.read,result:t.result,procedure:await o.getProcedureAtPath(e.router,e.path)}],isBatchCall:!1,accept:null,type:"mutation",connectionParams:null,signal:r.signal,url:e.url}}}];r.getRequestInfo=async function(e){const r=function(e){const r=u.find((r=>r.isMatch(e)));if(r)return r;if(!r&&"GET"===e.method)return c;throw new n.TRPCError({code:"UNSUPPORTED_MEDIA_TYPE",message:e.headers.has("content-type")?`Unsupported content-type "${e.headers.get("content-type")}`:"Missing content-type header"})}(e.req);return await r.parse(e)}},8776:(e,r,t)=>{var n=t(4224);const o=Symbol();function s(e=(e,r)=>e===r){return r=>n.observable((t=>{let n=o;return r.subscribe({next(r){n!==o&&e(n,r)||(n=r,t.next(r))},error(e){t.error(e)},complete(){t.complete()}})}))}const a=(e,r)=>e===r||!(!e||!r||"object"!=typeof e||"object"!=typeof r)&&Object.keys(e).length===Object.keys(r).length&&Object.entries(e).every((([e,t])=>a(t,r[e])));r.distinctUntilChanged=s,r.distinctUntilDeepChanged=function(){return s(a)},r.map=function(e){return r=>n.observable((t=>{let n=0;return r.subscribe({next(r){t.next(e(r,n++))},error(e){t.error(e)},complete(){t.complete()}})}))},r.share=function(e){return e=>{let r=0,t=null;const o=[];return n.observable((n=>(r++,o.push(n),t||(t=e.subscribe({next(e){for(const r of o)r.next?.(e)},error(e){for(const r of o)r.error?.(e)},complete(){for(const e of o)e.complete?.()}})),{unsubscribe(){r--,function(){if(0===r&&t){const e=t;t=null,e.unsubscribe()}}();const e=o.findIndex((e=>e===n));e>-1&&o.splice(e,1)}})))}},r.tap=function(e){return r=>n.observable((t=>r.subscribe({next(r){e.next?.(r),t.next(r)},error(r){e.error?.(r),t.error(r)},complete(){e.complete?.(),t.complete()}})))}},8784:(e,r,t)=>{var n=t(2588),o=t(2589);function s(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=new Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(s=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,o=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===o)return o=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(s).then(r,(function(e){return t(e),r()}))}else o|=1}catch(e){t(e)}if(1===o)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}r.mergeAsyncIterables=function(){let e="idle",r=n.createDeferred();const t=[],a=new Set,i=[];function c(t){if("pending"!==e)return;const n=function(e,r){const t=e[Symbol.asyncIterator]();let n="idle";function o(){n="done",r=()=>{}}return{pull:function(){"idle"===n&&(n="pending",t.next().then((e=>{if(e.done)return n="done",r({status:"return",value:e.value}),void o();n="idle",r({status:"yield",value:e.value})})).catch((e=>{r({status:"error",error:e}),o()})))},destroy:async()=>{o(),await(t.return?.())}}}(t,(t=>{if("pending"===e){switch(t.status){case"yield":i.push([n,t]);break;case"return":a.delete(n);break;case"error":i.push([n,t]),a.delete(n)}r.resolve()}}));a.add(n),n.pull()}return{add(r){switch(e){case"idle":t.push(r);break;case"pending":c(r)}},async*[Symbol.asyncIterator](){const u={stack:[],error:void 0,hasError:!1};try{if("idle"!==e)throw new Error("Cannot iterate twice");for(e="pending",function(e,r){if(null!=r){if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object expected.");var t,n;if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");if(void 0===(t=r[Symbol.asyncDispose])){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=r[Symbol.dispose],n=t}if("function"!=typeof t)throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:t,async:!0})}else e.stack.push({async:!0})}(u,o.makeAsyncResource({},(async()=>{e="done";const t=[];if(await Promise.all(Array.from(a.values()).map((async e=>{try{await e.destroy()}catch(e){t.push(e)}}))),i.length=0,a.clear(),r.resolve(),t.length>0)throw new AggregateError(t)})));t.length>0;)c(t.shift());for(;a.size>0;){for(await r.promise;i.length>0;){const[e,r]=i.shift();switch(r.status){case"yield":yield r.value,e.pull();break;case"error":throw r.error}}r=n.createDeferred()}}catch(e){u.error=e,u.hasError=!0}finally{const e=s(u);e&&await e}}}}},8919:(e,r,t)=>{var n=t(493),o=t(4889),s=t(2588),a=t(2589),i=t(8784),c=t(6875),u=t(71);function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function p(e,r,t){if(null!=r){if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object expected.");var n,o;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(o=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:n,async:t})}else t&&e.stack.push({async:!0});return r}function d(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var n=new Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};return(d=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,o=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===o)return o=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(s).then(r,(function(e){return t(e),r()}))}else o|=1}catch(e){t(e)}if(1===o)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}function f(e){return(n.isObject(e)||n.isFunction(e))&&"function"==typeof e?.then&&"function"==typeof e?.catch}class h extends Error{constructor(e){super("Max depth reached at path: "+e.join(".")),l(this,"path",void 0),this.path=e}}class m extends Error{constructor(e){super("Received error from server"),l(this,"data",void 0),this.data=e}}r.isPromise=f,r.jsonlStreamConsumer=async function(e){const{deserialize:r=e=>e}=e;let t=function(e){const r=function(e){const r="getReader"in e?e.getReader():(t=e,{getReader:()=>new ReadableStream({start(e){t.on("data",(r=>{e.enqueue(r)})),t.on("end",(()=>{e.close()})),t.on("error",(r=>{e.error(r)}))}}).getReader()}).getReader();var t;let n="";return new ReadableStream({async pull(e){const{done:t,value:n}=await r.read();t?e.close():e.enqueue(n)},cancel:()=>r.cancel()}).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform(e,r){n+=e;const t=n.split("\n");n=t.pop()??"";for(const e of t)r.enqueue(e)}}))}(e);let t=!1;return r.pipeThrough(new TransformStream({transform(e,r){if(t){const t=JSON.parse(e);r.enqueue(t)}else{const n=JSON.parse(e);r.enqueue(n),t=!0}}}))}(e.from);r&&(t=t.pipeThrough(new TransformStream({transform(e,t){t.enqueue(r(e))}})));let o=s.createDeferred();const i=function(e){const r=new Map;function t(){return Array.from(r.values()).every((e=>e.closed))}return{getOrCreate:function(n){let o=r.get(n);return o||(o=function(){let r;const n=new ReadableStream({start(e){r=e}}),o={enqueue:e=>r.enqueue(e),close:()=>{r.close(),s(),t()&&e.abort()},closed:!1,getReaderResource:()=>{const e=n.getReader();return a.makeResource(e,(()=>{e.releaseLock(),o.close()}))},error:e=>{r.error(e),s()}};function s(){Object.assign(o,{closed:!0,close:()=>{},enqueue:()=>{},getReaderResource:null,error:()=>{}})}return o}(),r.set(n,o)),o},isEmpty:t,cancelAll:function(e){for(const t of r.values())t.error(e)}}}(e.abortController);function c(r){const[t,o,s]=r,a=i.getOrCreate(s);switch(o){case 0:return n.run((async()=>{const r={stack:[],error:void 0,hasError:!1};try{const t=p(r,a.getReaderResource(),!1),{value:n}=await t.read(),[o,s,i]=n;switch(s){case 0:return u(i);case 1:throw e.formatError?.({error:i})??new m(i)}}catch(e){r.error=e,r.hasError=!0}finally{d(r)}}));case 1:return n.run((async function*(){const r={stack:[],error:void 0,hasError:!1};try{const t=p(r,a.getReaderResource(),!1);for(;;){const{value:r}=await t.read(),[n,o,s]=r;switch(o){case 1:yield u(s);break;case 0:return u(s);case 2:throw e.formatError?.({error:s})??new m(s)}}}catch(e){r.error=e,r.hasError=!0}finally{d(r)}}))}}function u(e){const[[r],...t]=e;for(const e of t){const[t]=e,n=c(e);if(null===t)return n;r[t]=n}return r}const l=e=>{o?.reject(e),i.cancelAll(e)};return t.pipeTo(new WritableStream({write(e){if(o){const r=e;for(const[t,n]of Object.entries(e)){const e=u(n);r[t]=e}return o.resolve(r),void(o=null)}const r=e,[t]=r;i.getOrCreate(t).enqueue(r)},close:()=>l(new Error("Stream closed")),abort:l}),{signal:e.abortController.signal}).catch((r=>{e.onError?.({error:r}),l(r)})),[await o.promise,i]},r.jsonlStreamProducer=function(e){let r=c.readableStreamFrom(async function*(e){const{data:r}=e;let t=0;const s=i.mergeAsyncIterables();function a(e){const r=t++,n=e(r);return s.add(n),r}function c(r,t){return a((async function*(n){const o=m(t);o&&(r.catch((r=>{e.onError?.({error:r,path:t})})),r=Promise.reject(o));try{const e=await r;yield[n,0,b(e,t)]}catch(r){e.onError?.({error:r,path:t}),yield[n,1,e.formatError?.({error:r,path:t})]}}))}function l(r,t){return a((async function*(n){const s={stack:[],error:void 0,hasError:!1};try{const a=m(t);if(a)throw a;const i=p(s,o.iteratorResource(r),!0);try{for(;;){const e=await i.next();if(e.done){yield[n,0,b(e.value,t)];break}yield[n,1,b(e.value,t)]}}catch(r){e.onError?.({error:r,path:t}),yield[n,2,e.formatError?.({error:r,path:t})]}}catch(e){s.error=e,s.hasError=!0}finally{const e=d(s);e&&await e}}))}function m(r){return e.maxDepth&&r.length>e.maxDepth?new h(r):null}function y(r,t){if(f(r))return[0,c(r,t)];if(n.isAsyncIterable(r)){if(e.maxDepth&&t.length>=e.maxDepth)throw new Error("Max depth reached");return[1,l(r,t)]}return null}function b(e,r){if(void 0===e)return[[]];const t=y(e,r);if(t)return[[0],[null,...t]];if(!function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return[[e]];const n={},o=[];for(const[t,s]of Object.entries(e)){const e=y(s,[...r,t]);e?(n[t]=0,o.push([t,...e])):n[t]=s}return[[n],...o]}const E={};for(const[e,t]of Object.entries(r))E[e]=b(t,[e]);yield E;let g=s;e.pingMs&&(g=u.withPing(s,e.pingMs));for await(const e of g)yield e}(e));const{serialize:t}=e;return t&&(r=r.pipeThrough(new TransformStream({transform(e,r){e===u.PING_SYM?r.enqueue(u.PING_SYM):r.enqueue(t(e))}}))),r.pipeThrough(new TransformStream({transform(e,r){e===u.PING_SYM?r.enqueue(" "):r.enqueue(JSON.stringify(e)+"\n")}})).pipeThrough(new TextEncoderStream)}},9132:(e,r,t)=>{var n=t(633),o=t(5025);function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,{intervalMs:r,pongTimeoutMs:t}){let n,o;function s(){n=setTimeout((()=>{e.send("PING"),o=setTimeout((()=>{e.close()}),t)}),r)}e.addEventListener("open",s),e.addEventListener("message",(({data:e})=>{clearTimeout(n),s(),"PONG"===e&&(clearTimeout(o),clearTimeout(n),s())})),e.addEventListener("close",(()=>{clearTimeout(n),clearTimeout(o)}))}class i{get ws(){return this.wsObservable.get()}set ws(e){this.wsObservable.next(e)}isOpen(){return!!this.ws&&this.ws.readyState===this.WebSocketPonyfill.OPEN&&!this.openPromise}isClosed(){return!!this.ws&&(this.ws.readyState===this.WebSocketPonyfill.CLOSING||this.ws.readyState===this.WebSocketPonyfill.CLOSED)}async open(){if(this.openPromise)return this.openPromise;this.id=++i.connectCount;const e=o.prepareUrl(this.urlOptions).then((e=>new this.WebSocketPonyfill(e)));this.openPromise=e.then((async e=>{this.ws=e,e.addEventListener("message",(function({data:e}){"PING"===e&&this.send("PONG")})),this.keepAliveOpts.enabled&&a(e,this.keepAliveOpts),e.addEventListener("close",(()=>{this.ws===e&&(this.ws=null)})),await function(e){const{promise:r,resolve:t,reject:n}=o.withResolvers();return e.addEventListener("open",(()=>{e.removeEventListener("error",n),t()})),e.addEventListener("error",n),r}(e),this.urlOptions.connectionParams&&e.send(await o.buildConnectionMessage(this.urlOptions.connectionParams))}));try{await this.openPromise}finally{this.openPromise=null}}async close(){try{await this.openPromise}finally{this.ws?.close()}}constructor(e){if(s(this,"id",++i.connectCount),s(this,"WebSocketPonyfill",void 0),s(this,"urlOptions",void 0),s(this,"keepAliveOpts",void 0),s(this,"wsObservable",n.behaviorSubject(null)),s(this,"openPromise",null),this.WebSocketPonyfill=e.WebSocketPonyfill??WebSocket,!this.WebSocketPonyfill)throw new Error("No WebSocket implementation found - you probably don't want to use this on the server, but if you do you need to pass a `WebSocket`-ponyfill");this.urlOptions=e.urlOptions,this.keepAliveOpts=e.keepAlive}}s(i,"connectCount",0),r.WsConnection=i,r.backwardCompatibility=function(e){return e.isOpen()?{id:e.id,state:"open",ws:e.ws}:e.isClosed()?{id:e.id,state:"closed",ws:e.ws}:e.ws?{id:e.id,state:"connecting",ws:e.ws}:null}},9149:(e,r,t)=>{var n=t(493);r.isAbortError=function(e){return n.isObject(e)&&"AbortError"===e.name},r.throwAbortError=function(e="AbortError"){throw new DOMException(e,"AbortError")}},9174:(e,r,t)=>{var n=t(9582),o=t(493);const s={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504},a={400:"BAD_REQUEST",401:"UNAUTHORIZED",402:"PAYMENT_REQUIRED",403:"FORBIDDEN",404:"NOT_FOUND",405:"METHOD_NOT_SUPPORTED",408:"TIMEOUT",409:"CONFLICT",412:"PRECONDITION_FAILED",413:"PAYLOAD_TOO_LARGE",415:"UNSUPPORTED_MEDIA_TYPE",422:"UNPROCESSABLE_CONTENT",429:"TOO_MANY_REQUESTS",499:"CLIENT_CLOSED_REQUEST",500:"INTERNAL_SERVER_ERROR",501:"NOT_IMPLEMENTED",502:"BAD_GATEWAY",503:"SERVICE_UNAVAILABLE",504:"GATEWAY_TIMEOUT"};function i(e){return s[e]??500}r.HTTP_CODE_TO_JSONRPC2=a,r.JSONRPC2_TO_HTTP_CODE=s,r.getHTTPStatusCode=function(e){const r=Array.isArray(e)?e:[e],t=new Set(r.map((e=>"error"in e&&o.isObject(e.error.data)?"number"==typeof e.error.data?.httpStatus?e.error.data.httpStatus:i(n.TRPC_ERROR_CODES_BY_NUMBER[e.error.code]):200)));return 1!==t.size?207:t.values().next().value},r.getHTTPStatusCodeFromError=function(e){return i(e.code)},r.getStatusCodeFromKey=i,r.getStatusKeyFromCode=function(e){return a[e]??"INTERNAL_SERVER_ERROR"}},9356:(e,r)=>{const t=()=>{},n=e=>{Object.freeze&&Object.freeze(e)};function o(e,r,s){var a,i;const c=r.join(".");return(a=s)[i=c]??(a[i]=new Proxy(t,{get(t,n){if("string"==typeof n&&"then"!==n)return o(e,[...r,n],s)},apply(t,o,s){const a=r[r.length-1];let i={args:s,path:r};return"call"===a?i={args:s.length>=2?[s[1]]:[],path:r.slice(0,-1)}:"apply"===a&&(i={args:s.length>=2?s[1]:[],path:r.slice(0,-1)}),n(i.args),n(i.path),e(i)}})),s[c]}r.createFlatProxy=e=>new Proxy(t,{get(r,t){if("then"!==t)return e(t)}}),r.createRecursiveProxy=e=>o(e,[],Object.create(null))},9547:(e,r)=>{r.resultOf=(e,...r)=>"function"==typeof e?e(...r):e},9582:(e,r)=>{const t={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,BAD_GATEWAY:-32603,SERVICE_UNAVAILABLE:-32603,GATEWAY_TIMEOUT:-32603,UNAUTHORIZED:-32001,PAYMENT_REQUIRED:-32002,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNSUPPORTED_MEDIA_TYPE:-32015,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099},n={[-32700]:"PARSE_ERROR",[-32600]:"BAD_REQUEST",[-32603]:"INTERNAL_SERVER_ERROR",[-32001]:"UNAUTHORIZED",[-32002]:"PAYMENT_REQUIRED",[-32003]:"FORBIDDEN",[-32004]:"NOT_FOUND",[-32005]:"METHOD_NOT_SUPPORTED",[-32008]:"TIMEOUT",[-32009]:"CONFLICT",[-32012]:"PRECONDITION_FAILED",[-32013]:"PAYLOAD_TOO_LARGE",[-32015]:"UNSUPPORTED_MEDIA_TYPE",[-32022]:"UNPROCESSABLE_CONTENT",[-32029]:"TOO_MANY_REQUESTS",[-32099]:"CLIENT_CLOSED_REQUEST"},o=[t.BAD_GATEWAY,t.SERVICE_UNAVAILABLE,t.GATEWAY_TIMEOUT,t.INTERNAL_SERVER_ERROR];r.TRPC_ERROR_CODES_BY_KEY=t,r.TRPC_ERROR_CODES_BY_NUMBER=n,r.retryableRpcCodes=o}},r={};!function t(n){var o=r[n];if(void 0!==o)return o.exports;var s=r[n]={exports:{}};return e[n].call(s.exports,s,s.exports,t),s.exports}(1770)})();